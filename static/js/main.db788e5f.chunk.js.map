{"version":3,"sources":["helpers/misc.js","contexts.js","../ /^/.//.*$/ groupOptions: {} namespace object","components/DataLoader/DataLoader.js","components/DataLoader/index.js","helpers/palettes.js","components/GraphAnnotation/hooks.js","components/ControlButton/index.js","components/ControlButton/ControlButton.js","components/FiltersEditor/index.js","components/FiltersEditor/FiltersEditor.js","components/VariablesEditor/index.js","components/VariablesEditor/VariablesEditor.js","components/ColorLegend/ColorLegend.js","components/ColorLegend/index.js","components/GraphAnnotation/GraphControls.js","components/GraphAnnotation/reducers.js","components/GraphAnnotation/GraphContainer.js","components/FooterNav/FooterNav.js","components/FooterNav/index.js","components/GraphAnnotation/index.js","components/GraphAnnotation/GraphAnnotation.js","components/IceCreamAnnotation/IceCreamControls.js","components/IceCreamAnnotation/IceCreamContainer.js","components/IceCreamAnnotation/IceCreamAnnotation.js","components/IceCreamAnnotation/index.js","components/LinearGraphAnnotation/LinearGraphControls.js","components/LinearGraphAnnotation/LinearGraphContainer.js","components/LinearGraphAnnotation/LinearGraphAnnotation.js","components/PlainPage/PlainPage.js","summary.js","components/PlainPage/index.js","App.js","reportWebVitals.js","index.js"],"names":["buildComponentCode","componentName","props","Object","entries","filter","val","undefined","Array","isArray","length","map","key","JSON","stringify","serializeValue","join","trim","buildGraphCode","buildIceCreamScatterPlotCode","buildLinearGraphCode","computeFiltersOptions","type","args","computeTableOptions","computeGraphFiltersOptions","data","columns","reduce","res","options","uniq","d","find","o","isNaN","Number","isInteger","id","title","includes","min","max","graph","gexfData","attrs","DOMParser","parseFromString","querySelectorAll","categories","FORBIDDEN_ATTRS","forEach","attr","getAttribute","push","Set","forEachNode","_node","cat","has","add","evalIfNodeMatches","attributes","filters","filtersModeAnd","attribute","value","cartesianToPolar","x","y","distance","Math","sqrt","radians","atan2","degrees","PI","radiansToDegrees","polarToCartesian","degreesToRadians","cos","sin","transformGeometry","rotate","translate","finalDegrees","newX","newY","VisualizationControlContext","React","createContext","webpackAsyncContext","req","__webpack_require__","Promise","resolve","then","e","Error","code","ids","keys","module","exports","Loader","percentsLoaded","className","style","width","DataLoader","url","children","useState","setData","loadingFraction","setLoadingFraction","useEffect","axios","get","onDownloadProgress","progressEvent","status","loaded","total","inputData","setTimeout","split","pop","csvParse","tsvParse","DEFAULT_COLOR_SPACE","cmin","cmax","lmin","lmax","SINGLE_COLOR_PALETTE","generatePalette","name","count","iwanthue","colorSpace","seed","clustering","usePrevious","ref","useRef","current","ControlButton","onClick","FiltersEditor","onToggleFiltersModeAnd","filtersOptions","onFiltersChange","isOpen","setIsOpen","newFilterAttribute","setNewFilterAttribute","newFilterOptions","option","index","newFilters","f","i","onChange","target","sort","a","b","VariablesEditor","variables","isNotAllDefault","v","localOptions","activeOptions","getOptions","label","newVal","ColorItemHandler","modality","color","isEdited","setEdited","editedColor","setEditedColor","debouncedOnChange","debounce","background","stopPropagation","newColor","hex","ColorLegend","colorPalette","SLIDER_MARKS","DebouncedSlider","defaultValue","setValue","step","newValue","marks","GraphControls","rescale","zoomIn","zoomOut","searchString","onSearchStringChange","labelDensity","nodeSizeVariable","nodeColorVariable","nodeLabelVariable","onNodeSizeVariableChange","onNodeColorVariableChange","onNodeLabelVariableChange","onLabelDensityChange","onColorPaletteChange","isMinified","setIsMinified","cx","onSubmit","preventDefault","placeholder","DEFAULT_NODE_COLOR","DEFAULT_NODE_SIZE_RANGE","renderer","getCamera","animatedReset","animatedZoom","animatedUnzoom","GraphContainer","height","extents","onCameraUpdate","cameraPosition","updateTimestamp","CELL_HEIGHT_RANGE","CELL_WIDTH_RANGE","cellHeightScale","scaleLinear","domain","range","cellWidthScale","nodeSize","useMemo","values","from","nodeColor","colors","size","palette","edgesMap","m","Map","_source","_target","sourceAttributes","targetAttributes","edge","_edgeAttributes","set","sourceNode","targetNode","previousNodeColor","previousNodeSize","previousNodeLabelVariable","previousLabelDensity","previousSearchString","previousFilters","previousColorPalette","nodeReducer","nodeLabel","nodeSizeFactor","nodeSizeScale","renderedNode","hidden","createNodeReducer","edgeReducer","el1","el2","renderedEdge","biggerNode","Color","lighten","rgb","string","createEdgeReducer","container","setRenderer","animate","needToRefresh","settings","labelGrid","cell","displayedLabels","toLowerCase","highlightNode","unhighlightNode","highlightedNodes","refresh","setContainer","useCallback","node","kill","newRenderer","WebGLRenderer","camera","getState","on","state","bind","GraphContainerWithDimensions","dimensions","FooterNav","prevPage","nextPage","to","route","GraphAnnotation","Content","contentsURL","gexf","parse","Graph","setCameraPosition","helpVisible","setHelpVisible","setSearchString","setFiltersModeAnd","Date","getTime","setUpdateTimeStamp","setFilters","setNodeColorVariable","setColorPalette","setNodeSizeVariable","setNodeLabelVariable","setLabelDensity","focusedVisualizationId","setFocusedVisualizationId","registeredVisualizations","setRegisteredVisualizations","thatId","sizes","sizeExtent","extent","Provider","onVisualizationUpdate","ratio","newNodeColorVariable","onRegisterVisualization","onUnregisterVisualization","copyOfRegistered","visualizationParams","href","fallback","str","IceCreamControls","xVariable","reverseX","yVariable","reverseY","sizeVariable","colorVariable","labelVariable","labelsOnTheSide","rotateMode","onToggleRotateMode","onXVariableChange","onYVariableChange","onColorVariableChange","onSizeVariableChange","onLabelVariableChange","onToggleLabelsOnTheSide","onToggleReverseX","onToggleReverseY","IceCreamContainer","inputColorPalette","smallestDimension","WIDTH","parseInt","HEIGHT","MIN_AREA","MAX_AREA","MARGIN","xRange","yRange","reverse","getX","getY","getSize","highlightedIndex","datum","rotateTransform","transf","point1X","point1Y","point2X","point2Y","point3X","point3Y","point4X","point4Y","transform","points","fill","x1","y1","x2","y2","stroke","ticks","tick","textAnchor","radius","xForXAxis","yForXAxis","xForYAxis","yForYAxis","labelX","labelY","pointerStartCoords","opacity","isMatching","strokeDasharray","cy","r","fontSize","IceCreamContainerWithDimensions","IceCreamAnnotation","setXVariable","setYVariable","setReverseX","setReverseY","setSizeVariable","setColorVariable","setLabelVariable","setLabelsOnTheSide","setRotateMode","thatXVariable","thatYVariable","thatReverseX","thatReverseY","thatSizeVariable","thatColorVariable","thatLabelVariable","thatLabelsOnTheSide","thatRotateMode","thatSearchString","thatColorPalette","theseFilters","theseFiltersModeAnd","LinearGraphControls","xLabelVariable","graphType","useRelativeScale","onToggleUseRelativeScale","onGraphTypeChange","onXLabelVariableChange","LinearGraphContainer","xLabelMap","dict","dataGroups","group","_id","ys","sum","filteredY","xValue","xMap","res2","transformedValue","xValues","yPropToFilter","xExtent","nice","uniqBy","item","filtersAffectingColor","colorValue","newValues","getYHisto","getColor","prev","yDisplace","firstX","firstY","path","index2","LinearGraphContainerWithDimensions","PlainPage","routes","contents","Component","setXLabelVariable","setGraphType","setUseRelativeScale","thatXLabelVariable","thatGraphType","thatUseRelativeScale","finalPalette","App","renderRoute","ThatComponent","process","lazy","repository","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"4XAWMA,EAAqB,SAACC,EAAeC,GAAhB,iBAA8BD,EAA9B,gBACvBE,OAAOC,QAAQF,GACdG,QAAO,YAAkB,IAAD,mBAATC,GAAS,WACvB,aAAiBC,IAARD,IAA6B,IAARA,GAAyB,KAARA,GAAeE,MAAMC,QAAQH,KAASA,EAAII,WAE1FC,KAAI,mCAAEC,EAAF,KAAON,EAAP,qBAAmBM,EAAnB,aAbc,SAAAN,GACrB,MAAmB,kBAARA,EACH,IAAN,OAAWA,EAAX,KACsB,kBAARA,EACPO,KAAKC,UAAUR,GACZA,EAQsBS,CAAeT,GAA1C,QACJU,KAAK,SACLC,OAPsB,SAWdC,EAAiB,SAAAhB,GAAK,OAAIF,EAAmB,aAAcE,IAE3DiB,EAA+B,SAAAjB,GAAK,OAAIF,EAAmB,gBAAiBE,IAC5EkB,EAAuB,SAAAlB,GAAK,OAAIF,EAAmB,mBAAoBE,IAEvEmB,EAAwB,SAACC,GAAmB,IAAD,uBAATC,EAAS,iCAATA,EAAS,kBACtD,OAAQD,GACN,IAAK,QACH,OAAOE,EAAmB,WAAnB,EAAuBD,GAChC,IAAK,QACL,QACE,OAAOE,EAA0B,WAA1B,EAA8BF,KAIrCC,EAAsB,SAAAE,GAC1B,OAAOA,EAAKC,QAAQC,QAAO,SAACC,EAAKjB,GAC/B,IAAMkB,EAAUC,eAAKL,EAAKf,KAAI,SAAAqB,GAAC,OAAIA,EAAEpB,OACjCU,EAAO,SAGNQ,EAAQG,MAAK,SAAAC,GAAC,OAAIC,OAAOD,QAI1BZ,EAHGQ,EAAQG,MAAK,SAAAC,GAAC,OAAKE,OAAOC,WAAWH,MAGjC,QAFA,WAKX,IAAMhC,EAAQ,CACZoC,GAAI1B,EACJ2B,MAAO3B,EACPU,OACAQ,WAOF,MALI,CAAC,QAAS,WAAWU,SAASlB,KAChCpB,EAAM4B,QAAU5B,EAAM4B,QAAQnB,KAAI,SAAAuB,GAAC,OAAKA,KACxChC,EAAMuC,IAAMA,YAAIvC,EAAM4B,SACtB5B,EAAMwC,IAAMA,YAAIxC,EAAM4B,UAEjB,2BACFD,GADL,kBAEGjB,EAAMV,MAER,KAEQuB,EAA6B,SAACkB,EAAOC,GAChD,IAEMC,GAFY,IAAIC,WACAC,gBAAgBH,EAAU,mBAC9BI,iBAAiB,6BAC7BC,EAAa,GAEbC,EAAkB,CAAC,UAqBzB,OAnBAL,EAAMM,SAAQ,SAAAC,GACZ,IAAMd,EAAKc,EAAKC,aAAa,MAC7B,IAAIH,EAAgBV,SAASF,GAA7B,CAEA,IAAMC,EAAQa,EAAKC,aAAa,SAC1B/B,EAAO8B,EAAKC,aAAa,QAC/BJ,EAAWK,KAAK,CACdhB,KACAC,QACAjB,OACAQ,QAAS,IAAIyB,UAGjBZ,EAAMa,aAAY,SAACC,EAAOvD,GACxB+C,EAAWE,SAAQ,SAAAO,GACZA,EAAI5B,QAAQ6B,IAAIzD,EAAMwD,EAAIpB,MAC7BoB,EAAI5B,QAAQ8B,IAAI1D,EAAMwD,EAAIpB,WAGzBW,EAAWrB,QAAO,SAACC,EAAK6B,GAAN,mBAAC,eAAmB7B,GAApB,kBAA0B6B,EAAIpB,GAAKoB,MAAQ,KAGzDG,EAAoB,SAACC,EAAYC,EAASC,GACrD,OAAIA,SAC+GzD,IAAjFwD,EAAQ9B,MAAK,gBAAGgC,EAAH,EAAGA,UAAWC,EAAd,EAAcA,MAAd,OAA0BJ,EAAWG,KAAe,GAAKC,WAGI3D,IAAjFwD,EAAQ9B,MAAK,gBAAGgC,EAAH,EAAGA,UAAWC,EAAd,EAAcA,MAAd,OAA0BJ,EAAWG,KAAe,GAAKC,MAQtFC,EAAmB,SAACC,EAAGC,GAClC,IAAMC,EAAWC,KAAKC,KAAKJ,EAAIA,EAAIC,EAAIA,GACjCI,EAAUF,KAAKG,MAAML,EAAGD,GAE9B,MAAO,CAAEE,WAAUG,UAASE,QAPL,SAAAF,GAAO,OAAIA,GAAW,IAAMF,KAAKK,IAMxCC,CAAiBJ,KAItBK,EAAmB,SAACR,EAAUK,GACzC,IAAMF,EAVwB,SAAAE,GAAO,OAAIA,GAAWJ,KAAKK,GAAK,KAU9CG,CAAiBJ,GACjC,MAAO,CACLP,EAAGE,EAAWC,KAAKS,IAAIP,GACvBJ,EAAGC,EAAWC,KAAKU,IAAIR,KAIdS,EAAoB,SAAC,EAAD,GAAsC,IAAnCd,EAAkC,EAAlCA,EAAGC,EAA+B,EAA/BA,EAAOc,EAAwB,EAAxBA,OAAQC,EAAgB,EAAhBA,UAAgB,EACtCjB,EAAiBC,EAAGC,GAA1CM,EAD4D,EAC5DA,QAASL,EADmD,EACnDA,SACbe,EAAeV,EACfQ,IACFE,GAAgBF,GAJkD,MAMzCL,EAAiBR,EAAUe,GAA7CC,EAN2D,EAM9DlB,EAAYmB,EANkD,EAMrDlB,EASf,OARIe,IACEA,EAAUhB,IACZkB,GAAQF,EAAUhB,GAEhBgB,EAAUf,IACZkB,GAAQH,EAAUf,IAGf,CAAED,EAAGkB,EAAMjB,EAAGkB,K,2KC5IvB,6CAEaC,EAFb,OAE2CC,EAAMC,cAAc,K,sFCF/D,IAAI/E,EAAM,CACT,gBAAiB,CAChB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,GAED,4BAA6B,CAC5B,IACA,IAED,yBAA0B,CACzB,IACA,GAED,4BAA6B,CAC5B,IACA,GAED,qBAAsB,CACrB,IACA,GAED,mBAAoB,CACnB,IACA,IAED,uBAAwB,CACvB,IACA,GAED,sBAAuB,CACtB,IACA,GAED,uBAAwB,CACvB,IACA,IAGF,SAASgF,EAAoBC,GAC5B,IAAIC,EAAoB3D,EAAEvB,EAAKiF,GAC9B,OAAOE,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMzF,EAAIiF,GAAMtD,EAAK8D,EAAI,GAC7B,OAAOP,EAAoBI,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOH,EAAoBvD,MAG7BqD,EAAoBU,KAAO,WAC1B,OAAOlG,OAAOkG,KAAK1F,IAEpBgF,EAAoBrD,GAAK,IACzBgE,EAAOC,QAAUZ,G,gLChEXa,EAAS,SAAC,GAAyB,IAAD,IAAvBC,sBAAuB,MAAN,EAAM,EACtC,OACE,qBAAKC,UAAU,mBAAf,SACE,qBAAKA,UAAU,SAAf,SACE,qBAAKA,UAAU,cAAcC,MAAO,CAACC,MAAOH,EAAiB,YCNtDI,EDYI,SAAC,GAAqB,IAApBC,EAAmB,EAAnBA,IAAKC,EAAc,EAAdA,SAAc,EACdC,mBAAS,MADK,mBAC/BtF,EAD+B,KACzBuF,EADyB,OAEQD,mBAAS,GAFjB,mBAE/BE,EAF+B,KAEdC,EAFc,KAyBtC,OAtBAC,qBAAU,WACJN,GACFO,IAAMC,IAAIR,EAAK,CACbS,mBAAoB,SAAAC,GAClB,IAAMC,EAASD,EAAcE,OAASF,EAAcG,MACpDR,EAAmBM,MAGtBzB,MAAK,YAAwB,IAAhB4B,EAAe,EAArBlG,KACNmG,YAAW,WACT,IAAInG,EAAOkG,EACkB,QAAzBd,EAAIgB,MAAM,KAAKC,MACjBrG,EAAOsG,YAASJ,GACkB,QAAzBd,EAAIgB,MAAM,KAAKC,QACxBrG,EAAOuG,YAASL,IAElBX,EAAQvF,WAIb,CAACoF,IAECA,EAIEpF,EAAOqF,EAASrF,GAEvB,cAAC,EAAD,CAAQ+E,eAAkC,IAAlBS,IALfH,K,kCEtCLmB,EAAsB,CAC1BC,KAAM,MACNC,KAAM,MACNC,KAAM,MACNC,KAAM,OAGFC,EAAuB,CAAC,QAEvB,SAASC,EAAgBC,EAAMC,GACpC,OAAc,IAAVA,GAAgBA,EACD,IAAVA,EACA,CAAC,UAAW,WAGdC,IAASD,EAAO,CACrBE,WAAYV,EACZW,KAAMJ,EACNK,WAAY,iBARoBP,E,6FCR7B,SAASQ,EAAY7E,GAC1B,IAAM8E,EAAMC,mBAIZ,OAHA7B,qBAAU,WACR4B,EAAIE,QAAUhF,KAET8E,EAAIE,Q,8CCPEC,MCAA,YAA6C,IAArBpC,EAAoB,EAApBA,SAAUqC,EAAU,EAAVA,QAC/C,OACE,wBAAQ1C,UAAU,iBAAiB0C,QAASA,EAA5C,SACGrC,K,QCHQsC,MCGA,YAMX,IALFC,EAKC,EALDA,uBACAtF,EAIC,EAJDA,eACAuF,EAGC,EAHDA,eACAC,EAEC,EAFDA,gBACAzF,EACC,EADDA,QACC,EAC2BiD,oBAAS,GADpC,mBACMyC,EADN,KACcC,EADd,OAEmD1C,wBAASzG,GAF5D,mBAEMoJ,EAFN,KAE0BC,EAF1B,KAIGC,EAAmB,GAqBvB,OApBIF,GACFJ,EAAeI,GAAoB7H,QAAQqB,SAAQ,SAAA2G,GAAM,OAAID,EAAiBvG,KAAKwG,MAoBnF,sBAAKpD,UAAU,gBAAf,UACE,8BACE,wBAAQA,UAAW+C,EAAS,YAAc,GAAIL,QAAS,kBAAMM,GAAWD,IAAxE,2BAKAA,GACA,gCACE,eAAC,EAAD,CAAgBL,QAASE,EAAzB,+BACqBtF,EAAiB,iCAAmC,4BAExED,EAAQrD,OACT,gCACE,mDACA,oBAAIgG,UAAU,mBAAd,SAEI3C,EAAQpD,KAAI,WAAqBoJ,GAAW,IAA9B9F,EAA6B,EAA7BA,UAAWC,EAAkB,EAAlBA,MAKvB,OACE,+BACE,gCACGD,EADH,MACiBC,KAEjB,8BACE,wBAAQkF,QAVO,WACnB,IAAIY,EAAajG,EAAQ1D,QAAO,SAAC4J,EAAGC,GAAJ,OAAUA,IAAMH,KAChDP,EAAgBQ,IAQZ,8BALKD,WAejB,KAEF,gCACE,2DACA,yBAAQ7F,MAAOyF,GAAsB,GAAIQ,SAhDrB,SAAAlE,GAC5B,IAAM3F,EAAM2F,EAAEmE,OAAOlG,MACjB5D,EAAII,QACNkJ,EAAsBtJ,IA6ChB,UAEIH,OAAOC,QAAQmJ,GAAgB5I,KAAI,WAAgBoJ,GAAW,IAAD,mBAAxBzH,EAAwB,KAAnBC,EAAmB,KAAnBA,MACxC,OACE,wBAAQ2B,MAAO5B,EAAf,SAAgCC,GAARwH,MAI9B,wBAAQ7F,MAAM,GAAd,kCAGuB3D,IAAvBoJ,EACA,yBAAQzF,MAAO,GAAIiG,SAvED,SAAClE,GAC7B,IAAM/B,EAAQ+B,EAAEmE,OAAOlG,MACvBsF,EAAgB,GAAD,mBACVzF,GADU,CAEb,CACEE,UAAW0F,EACXzF,YAGJ0F,OAAsBrJ,IA8DZ,UAEIsJ,EACCQ,MAAK,SAACC,EAAGC,GACR,OAAID,EAAIC,EACC,GAED,KAET5J,KAAI,SAAC2B,EAAIyH,GACR,OACE,wBAAQ7F,MAAO5B,EAAf,SAAgCA,GAARyH,MAI9B,wBAAQ7F,MAAM,GAAd,6BAEA,eC1GDsG,MCAA,YAGX,IAFF1I,EAEC,EAFDA,QACA2I,EACC,EADDA,UACC,EAC2BzD,oBAAS,GADpC,mBACMyC,EADN,KACcC,EADd,KAEKgB,OAA0FnK,IAAxEkK,EAAUxI,MAAK,SAAA0I,GAAC,MAAgB,YAAZA,EAAEzG,YAAmC3D,IAAZoK,EAAEzG,SACvE,OACE,sBAAKwC,UAAU,gCAAf,UACE,8BACE,wBAAQA,UAAW+C,GAAUiB,EAAkB,YAAc,GAAItB,QAAS,kBAAMM,GAAWD,IAA3F,8BAKCA,GAAUiB,IACX,8BAEID,EAAU9J,KAAI,WAA+CoJ,GAAW,IAAxDxH,EAAuD,EAAvDA,MAAO2B,EAAgD,EAAhDA,MAAOiG,EAAyC,EAAzCA,SAAU7I,EAA+B,EAA/BA,KAAMsJ,EAAyB,EAAzBA,aAiBtCC,EAAa,CACjB,CACE3G,MAAO,UACP3B,MAAO,cAHQ,mBAhBA,WACjB,OAAOjB,GACL,IAAK,QACL,IAAK,SACH,OAAIsJ,GAGIzK,OAAOC,QAAQ0B,GACzB,IAAK,UACH,MAAO,CAAC,CAAC,OAAQ,CAACS,MAAO,QAAS,CAAC,QAAS,CAACA,MAAO,SACtD,IAAK,SACL,QACE,OAAOpC,OAAOC,QAAQ0B,GACrBzB,QAAO,mCAAOyJ,GAAP,iBAAmB,CAAC,UAAW,SAAStH,SAASsH,EAAOxI,UAQjEwJ,GACAnK,KAAI,mCAAE2B,EAAF,WAAmB,CACtByI,MADG,KACWxI,MACd2B,MAAO5B,QAIb,OAAIuI,EAAcnK,QAAU,EACnB,KAGP,gCACE,+BAAK6B,EAAL,OACA,wBAAQ2B,MAAOA,EAAOiG,SAAU,SAAAlE,GAC5B,IAAM+E,EAAS/E,EAAEmE,OAAOlG,MACxB,OACSiG,EADI,YAAT7I,EACyB,SAAX0J,EAEFA,IALpB,SAQIH,EAAclK,KAAI,gBAAEuD,EAAF,EAAEA,MAAO6G,EAAT,EAASA,MAAT,OAChB,wBAAoB7G,MAAOA,EAA3B,SACG6G,GAAS,aADC7G,UAXX6F,Y,SC/CpBkB,EAAmB,SAAC,GAInB,IAHLC,EAGI,EAHJA,SACAf,EAEI,EAFJA,SACAgB,EACI,EADJA,MACI,EAC0BnE,oBAAS,GADnC,mBACGoE,EADH,KACaC,EADb,OAEkCrE,mBAASmE,GAF3C,mBAEGG,EAFH,KAEgBC,EAFhB,KAGJnE,qBAAU,WACRmE,EAAeJ,KACd,CAACA,IACJ,IAAMK,EAAoBC,IAAStB,EAAU,KAS7C,OACE,+BACE,sBAAMf,QAAS,kBAAMiC,GAAWD,IAAW1E,UAAU,eAAeC,MAAO,CAAC+E,WAAYP,KACxF,sBAAMzE,UAAU,kBAAhB,SAAmCwE,IAEjCE,EACA,mCACE,qBAAKhC,QAXO,WAClBe,EAASmB,GACTD,GAAU,IASuB3E,UAAU,yBAArC,SACE,sBAAK0C,QAAS,SAAAnD,GAAMA,EAAE0F,mBAAtB,UACE,wEAAwCT,EAAxC,OACA,cAAC,IAAD,CAAcf,SAlBL,SAAAyB,GACnBL,EAAeK,EAASC,KACxBL,EAAkBI,EAASC,MAgBqBV,MAAOG,WAIjD,SCpCKQ,MD0CA,YAGX,IAFFC,EAEC,EAFDA,aACA5B,EACC,EADDA,SAEA,OAAK4B,EAIH,sBAAKrF,UAAU,cAAf,UACE,4CACA,6BAEIvG,OAAOC,QAAQ2L,GACdpL,KAAI,YAAwB,IAAD,mBAArBuK,EAAqB,KAAXC,EAAW,KAO1B,OACE,cAAC,EAAD,aAAkBhB,SAPC,SAAAyB,GACnBzB,EAAS,2BACJ4B,GADG,kBAELb,EAAYU,OAI8C,CAACV,WAAUC,UAAzBD,WAhBlD,MEvCLc,EAAe,CACnB,IAAQ,aAGV,SAASC,EAAT,GAAoD,IAA1BC,EAAyB,EAAzBA,aAAc/B,EAAW,EAAXA,SAAW,EACvBnD,mBAASkF,GADc,mBAC1ChI,EAD0C,KACnCiI,EADmC,KAGjD/E,qBAAU,WACR+E,EAASD,KACR,CAACA,IAOJ,OACE,cAAC,IAAD,CACEzJ,IAAK,EACLC,IAAK,EACL0J,KAAM,IACNF,aAAcA,EACdhI,MAAOA,EACPiG,SAZmB,SAAAkC,GACrBF,EAASE,GACTlC,EAASkC,IAWPC,MAAON,IAME,SAASO,EAAT,GAwBX,IAvBFC,EAuBC,EAvBDA,QACAC,EAsBC,EAtBDA,OACAC,EAqBC,EArBDA,QAqBC,IApBDC,oBAoBC,MApBc,GAoBd,EAnBDC,EAmBC,EAnBDA,qBACA5I,EAkBC,EAlBDA,eACAsF,EAiBC,EAjBDA,uBACAuD,EAgBC,EAhBDA,aAEAC,EAcC,EAdDA,iBACAC,EAaC,EAbDA,kBACAC,EAYC,EAZDA,kBAEAzD,EAUC,EAVDA,eAUC,IATDxF,eASC,MATS,GAST,EARDgI,EAQC,EARDA,aAEAvC,EAMC,EANDA,gBACAyD,EAKC,EALDA,yBACAC,EAIC,EAJDA,0BACAC,EAGC,EAHDA,0BACAC,EAEC,EAFDA,qBACAC,EACC,EADDA,qBACC,EAEmCrG,oBAAS,GAF5C,mBAEMsG,EAFN,KAEkBC,EAFlB,KAGD,OACE,qCACE,wBAAQnE,QAAS,kBAAMmE,GAAeD,IAAa5G,UAAW8G,IAAG,gBAAiB,CAAC,aAAcF,IAAjG,SACG,cAEH,qBAAI5G,UAAW8G,IAAG,4BAA6B,CAAC,cAAeF,IAA/D,UAEE,qBAAI5G,UAAU,2BAAd,UAEA,cAAC,EAAD,CAAe0C,QAASsD,EAAxB,eAGA,cAAC,EAAD,CAAetD,QAASqD,EAAxB,eAGA,cAAC,EAAD,CAAerD,QAASoD,EAAxB,0BAIA,oBAAI9F,UAAU,oBAAd,SACE,sBAAM+G,SAAU,SAAAxH,GAAC,OAAIA,EAAEyH,kBAAvB,SACE,uBAAOpM,KAAK,OAAO6I,SAvBF,SAAAlE,GAAC,OAAI2G,EAAqB3G,EAAEmE,OAAOlG,QAuBHyJ,YAAY,aAAazJ,MAAOyI,QAIrF,oBAAIjG,UAAU,oBAAd,SACE,cAAC,EAAD,eAEO,CACD5E,QAASyH,EACTkB,UAAW,CAAC,CACRlI,MAAO,oBACP4H,SAAU8C,EACV/I,MAAO4I,EACPxL,KAAM,UAER,CACEiB,MAAO,qBACP2B,MAAO6I,EACP5C,SAAU+C,EACV5L,KAAM,SAER,CACEiB,MAAO,mBACP2B,MAAO8I,EACP7C,SAAUgD,EACV7L,KAAM,gBAQlB,oBAAIoF,UAAU,oBAAd,SACA,cAAC,EAAD,eAEO,CACD4C,yBACAtF,iBACAuF,iBACAC,kBACAzF,eAKN,oBAAI2C,UAAU,mCAAd,SACE,uBAAM+G,SAAU,SAAAxH,GAAC,OAAIA,EAAEyH,kBAAvB,UACE,uDACA,qBAAKhH,UAAU,mBAAf,SACI,cAACuF,EAAD,CACEC,aAAcW,EACd1C,SAAUsB,IAAS2B,EAAsB,cAM/CL,GAA2C,YAAtBA,EACrB,cAAC,EAAD,CACEhB,aAAcA,EACd5B,SAAUkD,IAEV,W,+BCjJRO,GAAqB,OACrBC,GAA0B,CAAC,EAAG,I,OCcpC,SAASrB,GAAQsB,GACAA,EAASC,YACjBC,cAAcF,GAGvB,SAASrB,GAAOqB,GACCA,EAASC,YACjBE,aAAaH,GAGtB,SAASpB,GAAQoB,GACAA,EAASC,YACjBG,eAAeJ,GAIxB,SAASK,GAAT,GAkCI,IAjCFxL,EAiCC,EAjCDA,MACAiE,EAgCC,EAhCDA,MACAwH,EA+BC,EA/BDA,OAGAvB,EA4BC,EA5BDA,aACAwB,EA2BC,EA3BDA,QA2BC,IAzBD1B,oBAyBC,MAzBc,GAyBd,EAxBDC,EAwBC,EAxBDA,qBAEA5I,EAsBC,EAtBDA,eACAsF,EAqBC,EArBDA,uBAqBC,IAnBDC,sBAmBC,MAnBgB,GAmBhB,MAlBDxF,eAkBC,MAlBS,GAkBT,EAjBDyF,EAiBC,EAjBDA,gBAEA8E,EAeC,EAfDA,eAEAC,EAaC,EAbDA,eAEAC,EAWC,EAXDA,gBAEA1B,EASC,EATDA,iBACAC,EAQC,EARDA,kBACAhB,EAOC,EAPDA,aACAiB,EAMC,EANDA,kBACAC,EAKC,EALDA,yBACAC,EAIC,EAJDA,0BACAC,EAGC,EAHDA,0BACAC,EAEC,EAFDA,qBACAC,EACC,EADDA,qBAEMoB,EAAoB,CAACL,EAAS,EAAGA,EAAS,KAC1CM,EAAmB,CAAC9H,EAAQ,EAAGA,EAAQ,KACvC+H,EAAkBC,cAAcC,OAAO,CAAC,EAAG,IAAIC,MAAML,GACrDM,EAAiBH,cAAcC,OAAO,CAAC,EAAG,IAAIC,MAAMJ,GAGpDM,EAAWC,mBAAQ,WACvB,GAAInC,GAAyC,YAArBA,GAAkCvD,EAAeuD,GAAmB,CAC1F,IAAMoC,EAAS1O,MAAM2O,KAAK5F,EAAeuD,GAAkBhL,SAC3D,MAAO,CACLW,IAAKA,YAAIyM,GACTxM,IAAKA,YAAIwM,GACTzG,KAAMqE,MAGT,CAACA,IAEEsC,EAAYH,mBAAQ,WACxB,GAAIlC,GAA2C,YAAtBA,GAAmCxD,EAAewD,GAAoB,CAC7F,IAAMsC,EAAS7G,EAAgBuE,EAAmBxD,EAAewD,GAAmBjL,QAAQwN,MACxFC,EAAU,GACVrF,EAAI,EAKR,OAJAX,EAAewD,GAAmBjL,QAAQqB,SAAQ,SAAA2G,GAChDyF,EAAQzF,GAAUuF,EAAOnF,GACzBA,OAEK,CACLqF,UACA9G,KAAMsE,MAGT,CAACA,IAEEyC,EAAWP,mBAAQ,WACvB,IAAMQ,EAAI,IAAIC,IAKd,OAJA/M,EAAMQ,SACJ,SAACwM,EAASC,EAASC,EAAkBC,EAAkBC,EAAMC,GAC7DP,EAAEQ,IAAIF,EAAM,CAACG,WAAYL,EAAkBM,WAAYL,OAElDL,IACN,CAAC9M,IAEEyN,EAAoBrH,EAAYqG,GAChCiB,EAAmBtH,EAAYiG,GAC/BsB,EAA4BvH,EAAYiE,GACxCuD,EAAuBxH,EAAY8D,GACnC2D,EAAuBzH,EAAY4D,GACnC8D,EAAkB1H,EAAYhF,GAC9B2M,EAAuB3H,EAAYgD,GAEnC4E,GDjHD,YASH,IARFvB,EAQC,EARDA,UACAJ,EAOC,EAPDA,SACA4B,EAMC,EANDA,UAMC,IALDC,sBAKC,MALgB,EAKhB,EAJDxC,EAIC,EAJDA,QAIC,IAHDtK,eAGC,MAHS,GAGT,EAFDC,EAEC,EAFDA,eACA+H,EACC,EADDA,aAEI+E,EAAgB,KAyDpB,OAjDEA,EALG9B,EAKaJ,cACbC,OAAO,CAACG,EAASvM,IAAKuM,EAAStM,MAC/BoM,MAAMjB,IANOe,cACbC,OAAO,CAACR,EAAQW,SAASvM,IAAK4L,EAAQW,SAAStM,MAC/CoM,MAAMjB,IAOS,SAAUjN,EAAKwC,GACjC,IAAM2N,EAAe,CACnB3M,EAAGhB,EAAKgB,EACRC,EAAGjB,EAAKiB,GAaV,GANE0M,EAAa5F,MAHViE,EAEMrD,EACYA,EAAa3I,EAAKgM,EAAU3G,QAAUmF,GAGzDwB,EAAUG,QAAQnM,EAAKgM,EAAU3G,QAAUmF,GALxBxK,EAAK+H,OAASyC,GAQhCoB,EAGE,CACL,IAAIrE,EAAIvH,EAAK4L,EAASvG,MACtBkC,EAAiB,kBAANA,EAAiBA,EAAI,EAChCoG,EAAazB,KAAOwB,EAAcnG,OANrB,CACb,IAAIA,EAAIvH,EAAKkM,MAAQ,EACrByB,EAAazB,KAAOwB,EAAcnG,GAuBpC,OAhBAoG,EAAazB,MAAQuB,EAGjB9M,EAAQrD,SAA+D,IAArDmD,aAAkBT,EAAMW,EAASC,IACrD+M,EAAaC,QAAS,EACtBD,EAAahG,MAAQ,KAErBgG,EAAaC,QAAS,EAKpBD,EAAahG,MAHV6F,EAGgC,YAAdA,EAA0BxN,EAAK2H,OAASnK,EAAMwC,EAAKwN,IAAc,GAFjExN,EAAK2H,OAASnK,GAMhCmQ,GCiDWE,CAAkB,CACpC7B,YACAJ,WACA4B,UAAW5D,EACXqB,UACAtK,UACAC,iBACA+H,iBAGImF,GDpDD,YAUH,IATF9B,EASC,EATDA,UACAJ,EAQC,EARDA,SAMAQ,EAEC,EAFDA,SACAzD,EACC,EADDA,aA+BA,OA1BoB,SAAUnL,EAAKwC,EAAM+N,EAAKC,GAAM,IAAD,EAI7C5B,EAASlI,IAAI1G,GAFfsP,EAF+C,EAE/CA,WACAC,EAH+C,EAG/CA,WAEIkB,EAAe,GAIfC,GAFiBtC,EAAWkB,EAAWlB,EAASvG,MAAQyH,EAAWZ,OAClDN,EAAWmB,EAAWnB,EAASvG,MAAQ0H,EAAWb,MACpBY,EAAaC,EAclE,OAXImB,IAIAD,EAAalG,MAHViE,EAEMrD,EACYA,EAAauF,EAAWlC,EAAU3G,QAAUmF,GAG/DwB,EAAUG,QAAQ+B,EAAWlC,EAAU3G,QAAUmF,GAL9B0D,EAAWnG,OAASyC,GAO3CyD,EAAalG,MAAQoG,IAAMF,EAAalG,OAAOqG,QAAQ,IAAKC,MAAMC,UAE7DL,GCeWM,CAAkB,CACpCvC,YACArD,eAIAhI,UACAC,iBACAwL,aAGIoC,GAAY3I,iBAAO,MAxExB,GAyE+BjC,mBAAS,MAzExC,qBAyEM8G,GAzEN,MAyEgB+D,GAzEhB,MAqFD,GATAzK,qBAAU,WACJmH,GAAkBT,IACHA,GAASC,YAEjB+D,QAAQvD,KAElB,CAACC,IAGAV,GAAU,CACZ,IAAIiE,IAAgB,EAGlB3B,IAAsBhB,GACtBiB,IAAqBrB,GACrBsB,IAA8BtD,GAC9B0D,IAAyB3E,GAEzB0E,IAAoB1M,IAKpB+J,GAASkE,SAASrB,YAAcA,GAChC7C,GAASkE,SAASd,YAAcA,GAChCa,IAAgB,GAGdxB,IAAyB1D,IAC3BiB,GAASkE,SAASC,UAAUC,KAAO,CACjCtL,MAAOmI,EAAelC,GACtBuB,OAAQO,EAAgB9B,IAI1BiB,GAASqE,gBAAkB,IAAI5O,IAC/BwO,IAAgB,GAGdvB,IAAyB7D,IACvBA,EAAajM,QAAU,EACzBiC,EAAMa,aAAY,SAAClB,EAAIwB,GACLA,EAATiH,MACGqH,cAAc5P,SAASmK,EAAayF,eAC5CtE,GAASuE,cAAc/P,GAClBwL,GAASwE,gBAAgBhQ,MAEzBwL,GAASyE,iBAAiBjD,KAAO,IAC1CxB,GAASyE,iBAAmB,IAAIhP,MAIhCwO,IACFjE,GAAS0E,UAIb,IAAMC,GAAeC,uBACnB,SAAAC,GAME,GALI7E,IAAYA,GAASnL,QAAUA,IACjCmL,GAAS8E,OACTf,GAAY,OAGVc,GAAQhQ,EAAO,CAEjB,IAAMkQ,EAAc,IAAIC,gBAAcnQ,EAAOgQ,EAAM,CAAChC,eAAaO,iBACjEW,GAAYgB,GACZ,IAAME,EAASF,EAAY9E,YAC3BO,EAAeyE,EAAOC,YACtBD,EAAOE,GAAG,WAAW,SAAAC,GACnB5E,EAAe4E,MAInBtB,GAAU1I,QAAUyJ,IAEtB,CAAChQ,IAEH,OACE,sBAAK+D,UAAU,8BAAf,UAEE,qBAAKsC,IAAKyJ,GAAc9L,MAAO,CAACC,MAAO,OAAQwH,OAAQ,UACtDN,IACC,cAACvB,EAAD,aACEC,QAASA,GAAQ2G,KAAK,KAAMrF,IAC5BrB,OAAQA,GAAO0G,KAAK,KAAMrF,IAC1BpB,QAASA,GAAQyG,KAAK,KAAMrF,KAEvB,CACDnB,eACAC,uBACA5I,iBACAsF,yBACAC,iBACAxF,UACAyF,kBACAsD,mBACAC,oBACAC,oBACAH,eACAI,2BACAC,4BACAC,4BACAE,uBACAD,uBACArB,aAAcA,GAAiBqD,GAAaA,EAAUG,cASrD,SAAS6D,GAA6BlT,GACnD,OACE,qBAAKwG,UAAU,iCAAf,SAEA,cAAC,IAAD,UAEI,SAAA2M,GAAU,OAAI,cAAC,GAAD,0CAAwBnT,GAAUmT,UCxQxD,ICFeC,GDEG,SAAC,GAGZ,IAFLC,EAEI,EAFJA,SACAC,EACI,EADJA,SAEA,OACE,wBAAQ9M,UAAW8G,IAAG,YAAa,CAAC,cAAe+F,IAAnD,SACE,+BAEIA,EACE,oBAAI7M,UAAU,gBAAd,SACE,6BACE,eAAC,IAAD,CAAM+M,GAAIF,EAASG,MAAnB,UACE,qBAAKhN,UAAU,SAAf,SAAyB,MACzB,sBAAKA,UAAU,eAAf,UACE,qBAAKA,UAAU,aAAf,SAA4B,wDAC5B,8BACK6M,EAAShR,kBAOtB,KAGFiR,EACE,oBAAI9M,UAAU,YAAd,SACE,6BACE,eAAC,IAAD,CAAM+M,GAAID,EAASE,MAAnB,UACE,gCACE,qBAAKhN,UAAU,aAAf,SAA4B,gDAC5B,qBAAKA,UAAU,eAAf,SACK8M,EAASjR,WAGhB,qBAAKmE,UAAU,SAAf,SAAyB,aAK/B,W,SE3CGiN,GCeS,SAAC,GAMlB,IALLC,EAKI,EALJA,QACAlS,EAII,EAJJA,KACAmS,EAGI,EAHJA,YACAN,EAEI,EAFJA,SACAC,EACI,EADJA,SAEM7Q,EAAQsM,mBAAQ,WACpB,OAAO6E,IAAKC,MAAMC,IAAOtS,KACxB,CAACA,IACE6H,EAAiB0F,mBAAQ,kBAAM5N,aAAsB,QAASsB,EAAOjB,KAAO,CAACiB,EAAOjB,IAJtF,EAMwCsF,wBAASzG,GANjD,mBAMGgO,EANH,KAMmB0F,EANnB,OAOkCjN,oBAAS,GAP3C,mBAOGkN,EAPH,KAOgBC,EAPhB,OAQoCnN,mBAAS,IAR7C,mBAQG2F,EARH,KAQiByH,EARjB,OASwCpN,oBAAS,GATjD,mBASGhD,EATH,KASmBqQ,EATnB,OAU0CrN,oBAAS,IAAIsN,MAAOC,WAV9D,mBAUG/F,EAVH,KAUoBgG,EAVpB,OAW0BxN,mBAAS,IAXnC,mBAWGjD,EAXH,KAWY0Q,EAXZ,OAY8CzN,wBAASzG,GAZvD,mBAYGwM,EAZH,KAYsB2H,EAZtB,OAaoC1N,wBAASzG,GAb7C,mBAaGwL,EAbH,KAaiB4I,EAbjB,OAc4C3N,wBAASzG,GAdrD,mBAcGuM,EAdH,KAcqB8H,EAdrB,OAe8C5N,wBAASzG,GAfvD,oBAeGyM,GAfH,MAesB6H,GAftB,SAgBoC7N,mBAxBZ,KAQxB,qBAgBG6F,GAhBH,MAgBiBiI,GAhBjB,SAkBwD9N,mBAAS,MAlBjE,qBAkBG+N,GAlBH,MAkB2BC,GAlB3B,SAmB4DhO,mBAAS,IAnBrE,qBAmBGiO,GAnBH,MAmB6BC,GAnB7B,MAkCJ9N,qBAAU,WACR,IAAK2N,IAA0B5U,OAAOkG,KAAK4O,IAA0BvU,OAAQ,CAC3E,IAAMyU,EAAShV,OAAOkG,KAAK4O,IAA0B,GACrDD,GAA0BG,MAE3B,CAACF,GAA0BF,KAE9B,IAAIK,GAAQ,GACZzS,EAAMa,aAAY,SAACmP,EAAM7O,GACvBsR,GAAM9R,KAAKQ,EAAWwL,SAExB,IAAM+F,GAAaC,YAAOF,IA4C1B,OACE,cAAC,KAA4BG,SAA7B,CAAsCrR,MAAO,CAC3CsR,sBAxC0B,SAAC,GAY1B,IAXHpR,EAWE,EAXFA,EACAC,EAUE,EAVFA,EACAoR,EASE,EATFA,MACA9I,EAQE,EARFA,aACA3I,EAOE,EAPFA,eACAD,EAME,EANFA,QACmB2R,EAKjB,EALF3I,kBACAD,EAIE,EAJFA,iBACAE,EAGE,EAHFA,kBACAH,EAEE,EAFFA,aACAd,EACE,EADFA,aAUA,GARAkI,EAAkB,CAAC7P,IAAGC,IAAGoR,UACzBjB,GAAmB,IAAIF,MAAOC,WAC9BH,EAAgBzH,GAChB0H,EAAkBrQ,GAClByQ,EAAW1Q,GACX2Q,EAAqBgB,GACrBd,EAAoB9H,GACpB+H,GAAqB7H,GACjBjB,GAAgBgB,IAAsB2I,EACxCf,EAAgB5I,OACX,CACL,IAAMsD,EAAS7G,EAAgBkN,EAAsBnM,EAAemM,GAAsB5T,QAAQwN,MAC5FC,EAAU,GACZrF,EAAI,EACRX,EAAemM,GAAsB5T,QAAQqB,SAAQ,SAAA2G,GACnDyF,EAAQzF,GAAUuF,EAAOnF,GACzBA,OAEFyK,EAAgBpF,GAElBuF,QAAiCvU,IAAjBsM,EA5FU,IA4F2CA,IAQnE8I,wBAvE4B,SAACrT,EAAIpC,GACnCgV,GAA4B,2BACvBD,IADsB,kBAExB3S,EAAKpC,MAqEN0V,0BAjE8B,SAAAtT,GAChC,IAAMuT,EAAgB,eAAOZ,WACtBY,EAAiBvT,GACxB4S,GAA4BW,IA+D1Bd,0BACAC,6BACAc,oBAAoB,2BACfvH,GADc,IAEjB5B,eAEA5I,UAEA+I,mBACAC,oBACAC,qBACAhJ,iBACA6I,gBACAd,kBAjBJ,SAoBA,sBAAKrF,UAAU,kBAAf,UACE,oCACE,gCACE,4BACE,wBAAQA,UAAWwN,EAAc,YAAa,GAAI9K,QAAS,kBAAM+K,GAAgBD,IAAjF,6CAIF,qBAAIxN,UAAS,oBAAewN,EAAc,YAAc,IAAxD,UACE,yGAGA,gDACgB,mBAAG9J,OAAO,QAAQ2L,KAAMlC,EAAxB,mDAEhB,sHAGA,6GAGA,2HAKJ,cAAC,WAAD,CAAUmC,SAAU,6CAApB,SACE,cAACpC,EAAD,MAEF,cAAC,GAAD,CAAWL,SAAUA,EAAUC,SAAUA,OAE3C,gCACE,qBAAK9M,UAAU,MAAf,SACE,cAAC,GAAD,eAEO,CACD/D,QAKAgK,eACApD,iBACAxF,UACAwK,iBACAD,eA5GS,SAAA4E,GAAU,IACxB9O,EAAe8O,EAAf9O,EAAGC,EAAY6O,EAAZ7O,EAAGoR,EAASvC,EAATuC,MACbxB,EAAkB,CAAC7P,IAAGC,IAAGoR,WA2GbjH,kBACA1B,mBACAC,oBACAC,qBACAhJ,iBACA6I,gBAEAd,eAEAa,qBA/Ee,SAAAqJ,GAC3B7B,EAAgB6B,IA+EJ3M,uBAAwB,kBAAM+K,GAAmBrQ,IAEjDwF,gBAAiB,SAACQ,GAAD,OAAgByK,EAAWzK,IAE5CoD,qBAAsB,SAAA9M,GAAG,OAAIwU,GAAgBxU,IAC7C2M,yBAA0B,SAAC3M,GAAD,OAASsU,EAAoBtU,IACvD4M,0BAA2B,SAAC5M,GAAD,OAASoU,EAAqBpU,IACzD6M,0BAA2B,SAAC7M,GAAD,OAASuU,GAAqBvU,IACzD+M,qBAAsB,SAAA/M,GAAG,OAAIqU,EAAgBrU,IAE7C+N,QAAS,CACPW,SAAU,CACRvM,IAAK4S,GAAW,GAChB3S,IAAK2S,GAAW,kBCnMrB,SAASa,GAAT,GAoCX,IAnCFC,EAmCC,EAnCDA,UACAC,EAkCC,EAlCDA,SAEAC,EAgCC,EAhCDA,UACAC,EA+BC,EA/BDA,SAEAC,EA6BC,EA7BDA,aACAC,EA4BC,EA5BDA,cACAC,EA2BC,EA3BDA,cACAC,EA0BC,EA1BDA,gBAEApN,EAwBC,EAxBDA,uBACAtF,EAuBC,EAvBDA,eACAwF,EAsBC,EAtBDA,gBACAzF,EAqBC,EArBDA,QAEA4S,EAmBC,EAnBDA,WACAhK,EAkBC,EAlBDA,aAEAC,EAgBC,EAhBDA,qBACAgK,EAeC,EAfDA,mBAEAC,EAaC,EAbDA,kBACAC,EAYC,EAZDA,kBACAC,EAWC,EAXDA,sBACAC,EAUC,EAVDA,qBACAC,EASC,EATDA,sBACAC,EAQC,EARDA,wBACA7J,EAOC,EAPDA,qBAEA8J,EAKC,EALDA,iBACAC,EAIC,EAJDA,iBAEA7N,EAEC,EAFDA,eACAwC,EACC,EADDA,aACC,EAEmC/E,oBAAS,GAF5C,mBAEMsG,EAFN,KAEkBC,EAFlB,KAGD,OACE,qCACE,wBAAQnE,QAAS,kBAAMmE,GAAeD,IAAa5G,UAAW8G,IAAG,gBAAiB,CAAC,aAAcF,IAAjG,SACG,cAEH,qBAAI5G,UAAW8G,IAAG,cAAe,CAAC,cAAeF,IAAjD,UAEE,oBAAI5G,UAAU,oBAAd,SACA,sBAAM+G,SAAU,SAAAxH,GAAC,OAAIA,EAAEyH,kBAAvB,SACE,uBAAOpM,KAAK,OAAO6I,SAXA,SAAAlE,GAAC,OAAI2G,EAAqB3G,EAAEmE,OAAOlG,QAWLyJ,YAAY,aAAazJ,MAAOyI,QAGnF,oBAAIjG,UAAU,oBAAd,SACE,cAAC,EAAD,eAEO,CACD5E,QAASyH,EACTkB,UAAW,CACT,CACElI,MAAO,eACP4H,SAAU0M,EACV3S,MAAOiS,EACP7U,KAAM,UAER,CACEiB,MAAO,iBACP4H,SAAUgN,EACVjT,MAAOkS,EACP9U,KAAM,WAER,CACEiB,MAAO,eACP4H,SAAU2M,EACV5S,MAAOmS,EACP/U,KAAM,UAER,CACEiB,MAAO,iBACP4H,SAAUiN,EACVlT,MAAOoS,EACPhV,KAAM,WAER,CACEiB,MAAO,oBACP4H,SAAU6M,EACV9S,MAAOqS,EACPjV,KAAM,UAER,CACEiB,MAAO,qBACP4H,SAAU4M,EACV7S,MAAOsS,EACPlV,KAAM,SAER,CACEiB,MAAO,oBACP4H,SAAU8M,EACV/S,MAAOuS,EACPnV,KAAM,UAER,CACEiB,MAAO,uCACP4H,SAAUyM,EACV1S,MAAOyS,EACPrV,KAAM,WAER,CACEiB,MAAO,wCACP4H,SAAU+M,EACVhT,MAAOwS,EACPpV,KAAM,iBAQlB,oBAAIoF,UAAU,oBAAd,SACE,cAAC,EAAD,eAEO,CACD4C,yBACAtF,iBACAuF,iBACAC,kBACAzF,eAMJyS,GAAmC,YAAlBA,EACjB,cAAC,EAAD,CACEzK,aAAcA,EACd5B,SAAUkD,IAEV,W,OCnId,SAASgK,GAAT,GAqCI,IAnCFzQ,EAmCC,EAnCDA,MAAOwH,EAmCN,EAnCMA,OACP1M,EAkCC,EAlCDA,KAEAyU,EAgCC,EAhCDA,UACAC,EA+BC,EA/BDA,SACAC,EA8BC,EA9BDA,UACAC,EA6BC,EA7BDA,SACAC,EA4BC,EA5BDA,aACAC,EA2BC,EA3BDA,cACAC,EA0BC,EA1BDA,cA0BC,IAzBDC,uBAyBC,SAxBaY,EAwBb,EAxBDvL,aAEA4K,EAsBC,EAtBDA,WAsBC,IArBDhK,oBAqBC,MArBc,GAqBd,EAnBDC,EAmBC,EAnBDA,qBACAgK,EAkBC,EAlBDA,mBAkBC,IAjBDrN,sBAiBC,MAjBgB,GAiBhB,EAfDD,EAeC,EAfDA,uBACAtF,EAcC,EAdDA,eACAwF,EAaC,EAbDA,gBACAzF,EAYC,EAZDA,QAGA8S,EASC,EATDA,kBACAC,EAQC,EARDA,kBACAC,EAOC,EAPDA,sBACAC,EAMC,EANDA,qBACAC,EAKC,EALDA,sBACAE,EAIC,EAJDA,iBACAC,EAGC,EAHDA,iBACAF,EAEC,EAFDA,wBACA7J,EACC,EADDA,qBAGMkK,EAAoB9U,YAAI,CAACmE,EAAOwH,IAEhCoJ,EAAQb,EAAac,SAASlT,KAAKC,KAAK+S,EAAoBA,EAAoB,IAAMA,EACtFG,EAASf,EAAac,SAASlT,KAAKC,KAAK+S,EAAoBA,EAAoB,IAAMA,EAEvFI,EAAWJ,EAAoB,GAC/BK,EAAWL,EAAoB,EAC/BM,EAASL,EAAQ,GAEnBM,EAAS,CAACD,EAAQL,EAAiB,EAATK,GAC1BE,EAAS,CAACF,EAAQH,EAAkB,EAATG,GAC3BzB,IACF0B,EAASA,EAAOE,WAEd1B,IACFyB,EAASA,EAAOC,WAGlB,IAKIjM,EALEkM,EAAO9B,GAA2B,YAAdA,EAA2BvH,cAAcE,MAAMgJ,GAAQjJ,OAAO,CAAC,EAAG,IAAM,kBAAM,GAClGqJ,EAAO7B,GAA2B,YAAdA,EAA2BzH,cAAcE,MAAMiJ,GAAQlJ,OAAO,CAAC,EAAG,IAAM,kBAAM,GAClGsJ,EAAU5B,GAAiC,YAAjBA,EAA8B3H,cAAcC,OAAOyG,YAAO5T,EAAKf,KAAI,SAAAqB,GAAC,OAAKA,EAAEuU,QAAiBzH,MAAM,CAAC6I,EAAUC,IAAa,kBAAM,GAIhK,GAAIN,EACFvL,EAAeuL,OAEZ,GAAId,GAAmC,YAAlBA,EAA6B,CACrD,IAAMjH,GAAU/G,EAAgBgO,EAAejN,EAAeiN,GAAe1U,QAAQpB,QACrFqL,EAAexC,EAAeiN,GAAe1U,QAAQF,QAAO,SAACC,EAAKiI,EAAQC,GAAd,mBAAC,eACxDlI,GADuD,kBAEzDiI,EAASyF,GAAQxF,OAChB,IAEN,IAGIqO,GACAzL,EAAajM,QAAU+V,IACzB2B,GAAmB,IAAI7U,IACvB7B,EAAKyB,SAAQ,SAACkV,EAAOtO,GACLsO,EAAM5B,GAAerE,cACzB5P,SAASmK,IACjByL,GAAiBxU,IAAImG,OAI3B,IAAIuO,GAAkB,CAACnT,OAAQ,GAC3BwR,IACF2B,GAAkB,CAChBnT,QAAS,GACTC,UAAW,CAAChB,EAAG,EAAGC,EAAGkT,EAAkB,KAI3C,IAAMgB,GAAS,SAACnU,EAAGC,GAAJ,OAAUa,aAAkB,CAACd,IAAGC,KAAIiU,KAzDlD,GA2DgCpT,aAAkB,CACjDd,EAAG,EACHC,EAAG,GACFiU,IAHOE,GA3DT,GA2DMpU,EAAeqU,GA3DrB,GA2DkBpU,EA3DlB,GA+DgCa,aAAkB,CACjDd,EAAGoT,EACHnT,EAAG,GACFiU,IAHOI,GA/DT,GA+DMtU,EAAeuU,GA/DrB,GA+DkBtU,EA/DlB,GAmEgCa,aAAkB,CACjDd,EAAGoT,EACHnT,EAAGqT,GACFY,IAHOM,GAnET,GAmEMxU,EAAeyU,GAnErB,GAmEkBxU,EAnElB,GAuEgCa,aAAkB,CACjDd,EAAG,EACHC,EAAGqT,GACFY,IAHOQ,GAvET,GAuEM1U,EAAe2U,GAvErB,GAuEkB1U,EAKnB,OACE,qCACI,sBACEqC,UAAU,cACVE,MAAO2Q,EACPnJ,OAAQmJ,EACRyB,UAAS,qBAAgBpS,EAAQ2Q,GAAqB,EAA7C,QAJX,UAME,yBACE0B,OAAM,UAAKT,GAAL,YAAgBC,GAAhB,YAA2BC,GAA3B,YAAsCC,GAAtC,YAAiDC,GAAjD,YAA4DC,GAA5D,YAAuEC,GAAvE,YAAkFC,IACxFnS,MAAO4Q,EACPpJ,OAAQsJ,EACRwB,KAAK,UAEP,oBAAGF,UAAS,oBAAerC,EAAa,EAAIkB,EAAS,EAAzC,aAA+ClB,GAAckB,EAAS,EAAtE,YAA2ElB,EAAa,cAAgB,IAApH,UACE,oBAAGjQ,UAAU,iBAAb,UACE,sBACEyS,GAAIZ,GAAOV,EAAQA,GAAQzT,EAC3BgV,GAAIb,GAAOV,EAAQA,GAAQxT,EAC3BgV,GAAId,GAAOV,EAAQH,EAAkB,EAATG,GAAYzT,EACxCkV,GAAIf,GAAOV,EAAQH,EAAkB,EAATG,GAAYxT,EACxCkV,OAAQ,UAGRrB,EAAKsB,OACLtB,EAAKsB,QACJ7Y,KAAI,SAAA8Y,GAAS,IAAD,EAEIlB,GAAOV,EAAQK,EAAKuB,IAA5BrV,EAFI,EAEJA,EAAGC,EAFC,EAEDA,EAFC,EAGYkU,GAAOV,EAAO,EAAGK,EAAKuB,GAAQ5B,EAAO,GAAlDsB,EAHC,EAGJ/U,EAAUgV,EAHN,EAGG/U,EAHH,EAIYkU,GAAOV,EAAO,EAAGK,EAAKuB,IAAnCJ,EAJC,EAIJjV,EAAUkV,EAJN,EAIGjV,EACd,OACE,8BACE,sBAAMqV,WAAW,MAAMtV,EAAG+U,EAAI9U,EAAG+U,EAAjC,SACGK,IAEH,sBACEN,GAAI/U,EACJgV,GAAI/U,EACJgV,GAAIA,EACJC,GAAIA,EACJC,OAAQ,YATJE,MAed,mBACET,UAAWrC,EAAU,oBAAgBa,EAAM,EAAa,IAATK,EAA1B,aAA2CH,EAAkB,IAATG,EAApD,sCAAgGA,EAAS,EAAI,EAA7G,KADvB,SAGE,sBACEnR,UAAU,qBACVgT,WAAY/C,EAAa,MAAQ,QAFnC,SAIGN,SAIP,oBAAG3P,UAAU,mBAAb,UACE,sBACEyS,GAAIZ,GAAOV,EAAQH,EAAkB,EAATG,GAAYzT,EACxCgV,GAAIb,GAAOV,EAAQH,EAAkB,EAATG,GAAYxT,EACxCgV,GAAId,GAAOf,EAAiB,EAATK,EAAYH,EAAkB,EAATG,GAAYzT,EACpDkV,GAAIf,GAAOf,EAAiB,EAATK,EAAYH,EAAkB,EAATG,GAAYxT,EACpDkV,OAAQ,UAGRtB,EAAKuB,OACLvB,EAAKuB,QACJ7Y,KAAI,SAAA8Y,GAAS,IAAD,EACIlB,GAAON,EAAKwB,GAAO/B,EAAkB,EAATG,GAApCzT,EADI,EACJA,EAAGC,EADC,EACDA,EADC,EAEYkU,GAAON,EAAKwB,GAAO/B,EAAkB,KAATG,GAAzCsB,EAFC,EAEJ/U,EAAUgV,EAFN,EAEG/U,EAFH,EAGYkU,GAAON,EAAKwB,GAAO/B,EAAkB,KAATG,GAAzCwB,EAHC,EAGJjV,EAAUkV,EAHN,EAGGjV,EACd,OACE,8BACE,sBAAMqV,WAAW,SAAStV,EAAGiV,EAAIhV,EAAGiV,EAApC,SACGG,IAEH,sBACEN,GAAI/U,EACJgV,GAAI/U,EACJgV,GAAIF,EACJG,GAAIF,EACJG,OAAQ,YATJE,MAed,mBACET,UAAWrC,EAAU,oBAAgBa,EAAhB,aAA0BE,EAAkB,IAATG,EAAnC,oCAA6EL,EAAiB,IAATK,EAArF,aAAsGH,EAASG,EAAS,EAAI,EAA5H,KADvB,SAGE,sBACEnR,UAAU,qBACVgT,WAAY/C,EAAa,MAAQ,QAFnC,SAIGR,SAIP,oBAAGzP,UAAW,kBAAd,UAGMwR,EAAKsB,OACLtB,EAAKsB,QACJ7Y,KAAI,SAAA8Y,GAAI,OACP,sBAEEN,GAAIZ,GAAOV,EAAQK,EAAKuB,IAAOrV,EAC/BgV,GAAIb,GAAOV,EAAQK,EAAKuB,IAAOpV,EAC/BgV,GAAId,GAAOf,EAAiB,EAATK,EAAYK,EAAKuB,IAAOrV,EAC3CkV,GAAIf,GAAOf,EAAiB,EAATK,EAAYK,EAAKuB,IAAOpV,EAC3CkV,OAAO,aALFE,MAWXxB,EAAKuB,OACLvB,EAAKuB,QACJ7Y,KAAI,SAAA8Y,GAAI,OACP,sBAEEN,GAAIZ,GAAON,EAAKwB,GAAO5B,GAAQzT,EAC/BgV,GAAIb,GAAON,EAAKwB,GAAO5B,GAAQxT,EAC/BgV,GAAId,GAAON,EAAKwB,GAAOjC,EAAiB,EAATK,GAAYzT,EAC3CkV,GAAIf,GAAON,EAAKwB,GAAOjC,EAAiB,EAATK,GAAYxT,EAC3CkV,OAAO,aALFE,SAUb,mBAAG/S,UAAU,yBAAb,SAEEhF,EACC2I,MAAK,SAACC,EAAGC,GACR,OAAI2N,EAAK5N,EAAE+L,IAAc6B,EAAK3N,EAAE8L,IACvB,GAED,KAET1V,KAAI,SAAC0X,EAAOtO,GACX,IAAM4P,EAASpV,KAAKC,KAAK2T,EAAQE,EAAM9B,IAAiBhS,KAAKK,IADxC,EAER2T,GAAON,EAAKI,EAAMlC,IAAa+B,EAAKG,EAAMhC,KAAlDjS,EAFgB,EAEhBA,EAAGC,EAFa,EAEbA,EAFa,EAIckU,GAAON,EAAKI,EAAMlC,IAAa+B,EAAKpJ,MAAQoJ,EAAKpJ,QAAQ,GAAK,GAAzF8K,EAJa,EAIhBxV,EAAiByV,EAJD,EAIFxV,EAJE,EAKckU,GAAON,EAAKnJ,MAAQmJ,EAAKnJ,QAAQ,GAAK,EAAGoJ,EAAKG,EAAMhC,KAA/EyD,EALa,EAKhB1V,EAAiB2V,EALD,EAKF1V,EACf2V,EAAU5V,EAAIuV,EAASpC,EAAoB,IAC3C0C,EAAStD,EAAatS,EAAIkT,EAAoB,IAAMlT,EAAIkT,EAAoB,IAC5E2C,EAAqB3B,GAAON,EAAKI,EAAMlC,IAAcwD,EAAQzB,EAAKG,EAAMhC,KAC5E,GAAIK,EAAiB,CAAC,IAAD,EACM6B,GAAQf,EAAiB,IAATK,EAAcA,EAAS9N,GAAS2N,EAAkB,EAATG,GAAcnW,EAAKhB,QACrGsZ,EAFmB,EACd5V,EAEL6V,EAHmB,EACL5V,EAKhB,IApME/D,EAoME6Z,EAAW,EACTC,GAAcrW,EAAQrD,QAAUmD,aAAkBwU,EAAOtU,EAASC,GAWxE,OAVID,EAAQrD,OAIRyZ,GAHEC,GAAgBhC,KAAoBA,GAAiBzU,IAAIoG,GAGjD,IAFA,EAIHqO,KAAqBA,GAAiBzU,IAAIoG,KACnDoQ,EAAU,IAIV,oBAEEzT,UAAW8G,IAAG,cAAe,CAAC,cAAe4M,IAC7CD,QAASA,EAHX,UAKE,sBACEzT,UAAU,YACV6S,OAAO,YACPc,gBAAgB,MAChBlB,GAAI/U,EACJgV,GAAI/U,EACJgV,GAAIS,EACJR,GAAIS,IAEN,sBACErT,UAAU,YACV6S,OAAO,YACPc,gBAAgB,MAChBlB,GAAI/U,EACJgV,GAAI/U,EACJgV,GAAIO,EACJN,GAAIO,IAEN,wBACErM,GAAIpJ,EACJkW,GAAIjW,EACJkW,EAAGZ,EACHT,MA5OJ5Y,EA4OmB+X,EAAM7B,GA5OjBzK,EAAeA,EAAazL,GAAO,QA6OvC6Z,QAAS,KAGTzD,EACA,sBACEyC,GAAIe,EAAmB9V,EACvBgV,GAAIc,EAAmB7V,EACvBgV,GAAIW,EACJV,GAAIW,EACJV,OAAO,YACPc,gBAAgB,QAEhB,KAEJ,mBACErB,UAAS,oBAAegB,EAAf,aAA0BC,EAA1B,KADX,SAGE,sBACEjB,UAAWrC,EAAa,cAAe,GACvChQ,MAAO,CACL6T,SAAU7D,GAAcD,EAAkBgB,EAAS,QAAKnX,GAH5D,SAMG8X,EAAM5B,SAlDN1M,cA4DjB,cAACmM,GAAD,eAEO,CACDC,YACAE,YACAD,WACAE,WACAC,eACAC,gBACAC,gBACAC,kBAEAC,aACAhK,eAEAC,uBACAgK,qBAEAC,oBACAC,oBACAC,wBACAC,uBACAC,wBACAC,0BACAC,mBACAC,mBACA/J,uBAEA/D,yBACAtF,iBACAwF,kBACAzF,UAEAwF,iBACAwC,qBAQC,SAAS0O,GAAgCva,GACtD,OACE,qBAAKwG,UAAU,iCAAf,SAEA,cAAC,IAAD,UAEI,SAAA2M,GAAU,OAAI,cAAC,GAAD,0CAA2BnT,GAAUmT,UCzY3D,ICReqH,GDQY,SAAC,GAMrB,IALL9G,EAKI,EALJA,QACAlS,EAII,EAJJA,KACAmS,EAGI,EAHJA,YACAN,EAEI,EAFJA,SACAC,EACI,EADJA,SAEMjK,EAAiB0F,mBAAQ,kBAAM5N,aAAsB,QAASK,KAAO,CAACA,IADxE,EAEkCsF,oBAAS,GAF3C,mBAEGkN,EAFH,KAEgBC,EAFhB,OAGoCnN,mBAAS,IAH7C,mBAGG2F,EAHH,KAGiByH,EAHjB,OAK8BpN,wBAASzG,GALvC,mBAKG4V,EALH,KAKcwE,EALd,OAM8B3T,wBAASzG,GANvC,mBAMG8V,EANH,KAMcuE,EANd,OAO4B5T,oBAAS,GAPrC,mBAOGoP,EAPH,KAOayE,EAPb,OAQ4B7T,oBAAS,GARrC,mBAQGsP,EARH,KAQawE,EARb,OASoC9T,wBAASzG,GAT7C,mBASGgW,EATH,KASiBwE,EATjB,OAUsC/T,wBAASzG,GAV/C,mBAUGiW,EAVH,KAUkBwE,EAVlB,OAWsChU,wBAASzG,GAX/C,mBAWGkW,EAXH,KAWkBwE,EAXlB,OAY0CjU,oBAAS,GAZnD,mBAYG0P,EAZH,KAYoBwE,EAZpB,OAaoClU,wBAASzG,GAb7C,oBAaGwL,GAbH,MAaiB4I,GAbjB,SAcwC3N,oBAAS,GAdjD,qBAcGhD,GAdH,MAcmBqQ,GAdnB,SAe0BrN,mBAAS,IAfnC,qBAeGjD,GAfH,MAeY0Q,GAfZ,SAkBgCzN,oBAAS,GAlBzC,qBAkBG2P,GAlBH,MAkBewE,GAlBf,SAoBwDnU,mBAAS,MApBjE,qBAoBG+N,GApBH,MAoB2BC,GApB3B,SAqB4DhO,mBAAS,IArBrE,qBAqBGiO,GArBH,MAqB6BC,GArB7B,MAoCEM,GAAwB,SAAC,GAiBxB,IAhBM4F,EAgBP,EAhBJjF,UACWkF,EAeP,EAfJhF,UAEUiF,EAaN,EAbJlF,SACUmF,EAYN,EAZJjF,SAEckF,EAUV,EAVJjF,aACekF,EASX,EATJjF,cACekF,EAQX,EARJjF,cACiBkF,EAOb,EAPJjF,gBAEYkF,EAKR,EALJjF,WACckF,EAIV,EAJJlP,aACcmP,EAGV,EAHJ/P,aAGI,IAFJhI,QAASgY,OAEL,MAFoB,GAEpB,EADYC,EACZ,EADJhY,eAeA,GAbA2W,EAAaS,GACbR,EAAaS,GACbR,EAAYS,GACZR,EAAYS,GACZR,EAAgBS,GAChBR,EAAiBS,GACjBR,EAAiBS,GACjBP,GAAcS,GACdxH,EAAgByH,GAChBX,EAAmBS,GACnBlH,GAAWsH,GACX1H,GAAkB2H,GAEdF,GAAoBtF,IAAkBiF,EACxC9G,GAAgBmH,QACX,GAAIL,EAAmB,CAC5B,IAAIlM,EAAUiH,GAAmC,YAAlBA,EAA8BhO,EAAgBgO,EAAejN,EAAeiN,GAAe1U,QAAQpB,aAAUH,EACtI8O,EAAS7G,EAAgBiT,EAAmBlS,EAAekS,GAAmB3Z,QAAQwN,MAExFpF,EAAI,EACRX,EAAekS,GAAmB3Z,QAAQqB,SAAQ,SAAA2G,GAChDyF,EAAQzF,GAAUuF,EAAOnF,GACzBA,OAEFyK,GAAgBpF,QACPxD,IACT4I,QAAgBpU,IAIpB6G,qBAAU,WACR,IAAK2N,IAA0B5U,OAAOkG,KAAK4O,IAA0BvU,OAAQ,CAC3E,IAAMyU,EAAShV,OAAOkG,KAAK4O,IAA0B,GACrDD,GAA0BG,GAC1BK,GAAsBP,GAAyBE,OAEhD,CAACF,GAA0BF,KAM9B,OACE,cAAC,KAA4BQ,SAA7B,CAAsCrR,MAAO,CAC3CsR,yBACAG,wBA5E4B,SAACrT,EAAIpC,GACnCgV,GAA4B,2BACvBD,IADsB,kBAExB3S,EAAKpC,MA0EN0V,0BAtE8B,SAAAtT,GAChC,IAAMuT,EAAgB,eAAQZ,WACvBY,EAAiBvT,GACxB4S,GAA4BW,IAoE1Bd,0BACAC,6BACAc,oBAAqB,CACnBK,YACAE,YAEAD,WACAE,WAEAC,eACAC,gBACAC,gBACAC,kBAEAC,cACAhK,eACAZ,gBAEAhI,WACAC,oBAvBJ,SA0BE,sBAAK0C,UAAU,kBAAf,UACE,oCACE,gCACE,4BACE,wBAAQA,UAAWwN,EAAc,YAAc,GAAI9K,QAAS,kBAAM+K,GAAgBD,IAAlF,6CAIF,qBAAIxN,UAAS,oBAAewN,EAAc,YAAc,IAAxD,UACE,yGAGA,gDACgB,mBAAG9J,OAAO,QAAQ2L,KAAMlC,EAAxB,mDAEhB,sHAGA,6GAGA,2HAKJ,cAAC,WAAD,CAAUmC,SAAU,6CAApB,SACE,cAACpC,EAAD,MAEF,cAAC,GAAD,CAAWL,SAAUA,EAAUC,SAAUA,OAE3C,gCACE,qBAAK9M,UAAU,MAAf,SACE,cAAC,GAAD,eAEK,CACDhF,OACA6H,iBAEA4M,YACAC,WACAC,YACAC,WACAC,eACAC,gBACAC,gBACAC,kBACA3K,gBAEA4K,cACAhK,eAEA3I,kBACAD,WAEAuF,uBAAwB,kBAAM+K,IAAmBrQ,KACjDwF,gBAAiB,SAACQ,GAAD,OAAgByK,GAAWzK,IAE5C4C,qBAxFe,SAAAqJ,GAC3B7B,EAAgB6B,IAwFJW,mBAAoB,kBAAMuE,IAAexE,KAEzCE,kBAAmB,SAACvW,GAAD,OAASqa,EAAara,IACzCwW,kBAAmB,SAACxW,GAAD,OAASsa,EAAata,IAEzC6W,iBAAkB,kBAAM0D,GAAazE,IACrCgB,iBAAkB,kBAAM0D,GAAaxE,IAErCS,sBAAuB,SAACzW,GAAD,OAAS0a,EAAiB1a,IACjD0W,qBAAsB,SAAC1W,GAAD,OAASya,EAAgBza,IAC/C2W,sBAAuB,SAAC3W,GAAD,OAAS2a,EAAiB3a,IACjD4W,wBAAyB,SAAA5W,GAAG,OAAI4a,EAAmB5a,IACnD+M,qBAAsB,SAAA/M,GAAG,OAAIqU,GAAgBrU,iB,UEzM9C,SAAS2b,GAAT,GAiCX,IAhCF9F,EAgCC,EAhCDA,UACA+F,EA+BC,EA/BDA,eAEAC,EA6BC,EA7BDA,UACA9F,EA4BC,EA5BDA,UAGAG,EAyBC,EAzBDA,cAEA4F,EAuBC,EAvBDA,iBAEA9S,EAqBC,EArBDA,uBACAtF,EAoBC,EApBDA,eACAwF,EAmBC,EAnBDA,gBACAzF,EAkBC,EAlBDA,QAGAsY,EAeC,EAfDA,yBACAC,EAcC,EAdDA,kBAEAzF,EAYC,EAZDA,kBACA0F,EAWC,EAXDA,uBACAzF,EAUC,EAVDA,kBACAC,EASC,EATDA,sBAEA1J,EAOC,EAPDA,qBAKA9D,EAEC,EAFDA,eACAwC,EACC,EADDA,aACC,EAEmC/E,oBAAS,GAF5C,mBAEMsG,EAFN,KAEkBC,EAFlB,KAGD,OACE,qCACE,wBAAQnE,QAAS,kBAAMmE,GAAeD,IAAa5G,UAAW8G,IAAG,gBAAiB,CAAC,aAAcF,IAAjG,SACG,cAEH,qBAAI5G,UAAW8G,IAAG,cAAe,CAAC,cAAeF,IAAjD,UAOE,oBAAI5G,UAAU,oBAAd,SACE,cAAC,EAAD,eAEO,CACD5E,QAASyH,EACTkB,UAAW,CACT,CACElI,MAAO,iBACP4H,SAAUmS,EACV1R,aAAc,CAAC,CACb,YACA,CAACrI,MAAO,WACP,CACD,YACA,CAACA,MAAO,iBAEV2B,MAAOiY,EACP7a,KAAM,UAER,CACEiB,MAAO,iBACP4H,SAAU0M,EACV3S,MAAOiS,EACP7U,KAAM,UAER,CACEiB,MAAO,cACP4H,SAAUoS,EACVrY,MAAOgY,EACP5a,KAAM,UAQR,CACEiB,MAAO,cACP4H,SAAU2M,EACV5S,MAAOmS,EACP/U,KAAM,UAQR,CACEiB,MAAO,8DACP4H,SAAUkS,EACVnY,MAAOkY,EACP9a,KAAM,WAER,CACEiB,MAAO,qBACP4H,SAAU4M,EACV7S,MAAOsS,EACPlV,KAAM,eAalB,oBAAIoF,UAAU,oBAAd,SACE,cAAC,EAAD,eAEO,CACD4C,yBACAtF,iBACAuF,iBACAC,kBACAzF,eAMJyS,GAAmC,YAAlBA,EACjB,cAAC,EAAD,CACEzK,aAAcA,EACd5B,SAAUkD,IAEV,W,oBCtId,SAASmP,GAAT,GAyCI,IA0DEvE,EAAMC,EAjGVtR,EAuCC,EAvCDA,MACAwH,EAsCC,EAtCDA,OACA1M,EAqCC,EArCDA,KAEAyU,EAmCC,EAnCDA,UACA+F,EAkCC,EAlCDA,eACA9F,EAiCC,EAjCDA,SACAC,EAgCC,EAhCDA,UACAC,EA+BC,EA/BDA,SACAC,EA8BC,EA9BDA,aACAC,EA6BC,EA7BDA,cACAC,EA4BC,EA5BDA,cACca,EA2Bb,EA3BDvL,aA2BC,IAzBDY,oBAyBC,MAzBc,GAyBd,MAvBDwP,iBAuBC,MAvBW,YAuBX,EAtBDC,EAsBC,EAtBDA,iBAEAxP,EAoBC,EApBDA,qBAoBC,IAnBDrD,sBAmBC,MAnBgB,GAmBhB,EAjBDD,EAiBC,EAjBDA,uBACAtF,EAgBC,EAhBDA,eACAwF,EAeC,EAfDA,gBACAzF,EAcC,EAdDA,QAGA8S,EAWC,EAXDA,kBACA0F,EAUC,EAVDA,uBACAzF,EASC,EATDA,kBACAC,EAQC,EARDA,sBACAC,EAOC,EAPDA,qBACAC,EAMC,EANDA,sBACAE,EAKC,EALDA,iBACAC,EAIC,EAJDA,iBACA/J,EAGC,EAHDA,qBACAiP,EAEC,EAFDA,kBACAD,EACC,EADDA,yBAIM7E,EAAQ5Q,EACR8Q,EAAStJ,EAGTyJ,EAASL,EAAQ,GAEnBM,EAAS,CAACD,EAAQL,EAAQK,EAAS,GACnCE,EAAS,CAACL,EAASG,EAAQA,GAEzB4E,EAAYxN,mBAAQ,WACxB,OAAOvN,EAAKE,QAAO,SAAC8a,EAAMrE,GACxB,IAAM5B,EAAmC,YAAnByF,EAA+B/F,EAAY+F,EACjE,OAAO,2BACFQ,GADL,kBAEGrE,EAAMlC,GAAakC,EAAM5B,OAE3B,MAEF,CAAC/U,EAAMyU,EAAW+F,IAGjBS,EAAa,CAAC,MAACpc,EAAWmB,IAoB9B,GAnBI8U,IACFmG,EAAanc,MAAM2O,KAAKyN,aAAMlb,GAAM,SAAAM,GAAC,OAAIA,EAAEwU,QAI7CmG,EAAaA,EAAWhc,KAAI,YAAoB,IAAD,mBAAjBkc,EAAiB,KAAZ3N,EAAY,KAU7C,MAAO,CAAC2N,EATQrc,MAAM2O,KAAKyN,aAAM1N,GAAQ,SAAAlN,GAAC,OAAIA,EAAEmU,OAAaxV,KAAI,YAAc,IAAD,mBAAXyD,EAAW,KAAR0Y,EAAQ,KAC5E,MAAO,CACL1Y,GAAIA,EAEJC,EAAGyY,EAAGlb,QAAO,SAACmb,EAAK1Y,GAAN,OAAY0Y,IAAQ1Y,EAAEgS,KAAa,GAChD2G,UAAWF,EAAGzc,QAAO,SAAA2B,GAAC,OAAI+B,EAAQrD,QAASmD,aAAkB7B,EAAG+B,EAASC,MAAwBpC,QAAO,SAACmb,EAAK1Y,GAAN,OAAY0Y,IAAQ1Y,EAAEgS,KAAa,GAC3I4G,OAAQ7Y,UAOI,cAAd+X,EAA2B,CAC7B,IAAMe,GAAOP,EAAW/a,QAAO,SAACC,EAAD,GAA2B,IAAD,mBAAnBsJ,EAAmB,KACvD,OADuD,KACzCvJ,QAAO,SAACub,EAAMjZ,GAC1B,IAAME,EAAIF,EAAME,EACVgZ,EAAgB,2BAAOlZ,GAAP,IAAciH,UACpC,OAAO,2BACFgS,GADL,kBAEG/Y,EAAI+Y,EAAK/Y,GAAL,sBAAc+Y,EAAK/Y,IAAnB,CAAuBgZ,IAAoB,CAACA,OAElDvb,KACF,IAEH8a,EAAaxc,OAAOC,QAAQ8c,IAG9B,IACIG,GA2DAtR,GA5DEuR,GAAgBlB,EAAmB,YAAc,IAEvD,GAAkB,cAAdD,EAA2B,CAE7B,IAAMoB,GAAUjI,YAAOqH,EAAW/a,QAAO,SAACC,EAAD,0BAAYqN,GAAZ,uCAA4BrN,GAA5B,YAAoCqN,EAAOvO,KAAI,SAAAgK,GAAC,OAAIA,EAAEvG,SAAM,KACrG6T,EAAOrJ,cAAcE,MAAMgJ,GAAQjJ,OAAO0O,IAC1CrF,EAAOtJ,cAAcE,MAAMiJ,GAAQlJ,OAAO,CAAC,EAAGnM,eAAIia,EAAWhc,KAAI,mCAAOuO,GAAP,kBAAmBxM,eAAIwM,EAAOvO,KAAI,SAAAgK,GAAC,OAAIA,EAAE2S,cAAqBE,YAC1H,GAAkB,cAAdrB,EAA2B,CACpC,IAAMoB,GAAUjI,YAAOqH,EAAWhc,KAAI,2CACtCsX,EAAOrJ,cAAcE,MAAMgJ,GAAQjJ,OAAO0O,IAC1CF,GAAUI,kBAAOd,GAAY,SAAA3a,GAAC,OAAIA,EAAE,MAEpCkW,EAAOtJ,cAAcE,MAAMiJ,GAAQlJ,OAAO,CAAC,EAAGnM,eAAIia,EAAWhc,KAAI,oDAAqBiB,QAAO,SAACmb,EAAKW,GAAN,OAAeX,EAAMW,EAAKJ,MAAiB,SAAOE,OAIhJ,GAAIzZ,EAAQrD,QAAU8V,EAAe,CACpC,IAAMmH,GAAwB5Z,EAAQ1D,QAAO,SAAA4J,GAAC,OAAIA,EAAEhG,YAAcuS,KAChD,cAAd2F,EACFQ,EAAaA,EAAWtc,QAAO,YAA2B,IAAD,mBAAxBud,EAAwB,UACvD,OAAID,KACE3Z,SACkHzD,IAApFod,GAAsB1b,MAAK,cAAGgC,UAAH,IAAcC,EAAd,EAAcA,MAAd,OAA0B0Z,IAAe,GAAK1Z,WAGI3D,IAApFod,GAAsB1b,MAAK,cAAGgC,UAAH,IAAcC,EAAd,EAAcA,MAAd,OAA0B0Z,IAAe,GAAK1Z,SAOhF,cAAdiY,IAEVQ,EAAaA,EAAW/a,QAAO,SAACC,EAAD,GAA4B,IAAD,mBAApBob,EAAoB,KAAZ/N,EAAY,KACxD,GAAIyO,GAAuB,CACzB,IAAME,EAAY3O,EAAO7O,QAAO,SAAA6D,GAC9B,OAAIF,SACmHzD,IAArFod,GAAsB1b,MAAK,cAAGgC,UAAH,IAAcC,EAAd,EAAcA,MAAd,OAA0BA,EAAMiH,QAAU,GAAKjH,WAGI3D,IAArFod,GAAsB1b,MAAK,cAAGgC,UAAH,IAAcC,EAAd,EAAcA,MAAd,OAA0BA,EAAMiH,QAAU,GAAKjH,QAIvG,OAAI2Z,EAAUnd,OACN,GAAN,mBAAWmB,GAAX,CAAgB,CAACob,EAAQY,KAEbhc,EAGd,MAAM,GAAN,mBAAWA,GAAX,CAAgB,CAACob,EAAQ/N,OAE1B,KAQP,GAAIoI,EACFvL,GAAeuL,OAEZ,GAAId,GAAmC,YAAlBA,EAA6B,CACrD,IAAMjH,GAAU/G,EAAgBgO,EAAejN,EAAeiN,GAAe1U,QAAQpB,QACrFqL,GAAexC,EAAeiN,GAAe1U,QAAQF,QAAO,SAACC,EAAKiI,EAAQC,GAAd,mBAAC,eACxDlI,GADuD,kBAEzDiI,EAASyF,GAAQxF,OAChB,IAEN,IAKIqO,GAiBA0F,GAtBAC,GAAW,SAACzd,GACd,OAAOyL,GAAeA,GAAazL,GAAO,QA8D5C,OAzDIqM,EAAajM,QAAU+V,IACzB2B,GAAmB,IAAI7U,IACvB7B,EAAKyB,SAAQ,SAACkV,EAAOtO,GACLsO,EAAM5B,GAAerE,cACzB5P,SAASmK,IACjByL,GAAiBxU,IAAImG,OAKvBqM,IACF0B,EAASA,EAAOE,WAEd1B,IACFyB,EAASA,EAAOC,WAIA,cAAdmE,IAyBFQ,GAxBAA,EAAaA,EAAWhc,KAAI,YAAuB,IAAD,mBAqBhD,MAAO,CArByC,UAG/C0J,MAAK,SAACC,EAAGC,GACR,OAAID,EAAEa,MAAQZ,EAAEY,MACP,GACM,KAEhBvJ,QAAO,SAAC+F,EAAOzD,EAAO6F,GACrB,IAAMiU,EAAOjU,EAAQ,EAAIpC,EAAMoC,EAAQ,QAAKxJ,EACtC0d,EAAYD,GAAQA,EAAK3Z,GAAK2Z,EAAKC,WAAa,GAAK,EAErD5R,EAAQ,2BACTnI,GADS,IAEZ+Z,YACA5Z,GAAIH,EAAMG,EACVD,GAAIF,EAAME,IAEZ,MAAM,GAAN,mBAAWuD,GAAX,CAAkB0E,MACjB,OAGF,KAEqBhC,MAAK,SAACC,EAAGC,GAC/B,OAAKD,EAAE,IAAMC,EAAE,GACN,GAED,KAEVuT,GAAYlP,cACXE,MAAM,CAAC+I,EAAQH,EAAkB,EAATG,IACxBhJ,OAAO,CAAC,EAAGnM,eAAIia,EAAWhc,KAAI,oDAA8BiB,QAAO,SAACmb,EAAKpS,GAAN,OAAYoS,EAAMpS,EAAEtG,IAAG,SAAOmZ,OAClGtF,EACCrJ,OAAO,CAAC,EAAGnM,eAAIia,EAAWhc,KAAI,oDAA8BiB,QAAO,SAACmb,EAAKpS,GAAN,OAAYoS,EAAMpS,EAAEtG,IAAG,SAAOmZ,QAKlG,qCACI,qBAAK9W,UAAU,eAAeE,MAAO4Q,EAAOpJ,OAAQsJ,EAApD,SACI,8BAEkB,cAAdyE,EACAQ,EAAWhc,KAAI,YAA2B,IAAD,mBAAxBid,EAAwB,KAAZ1O,EAAY,KACjCgP,EAASjG,EAAK/I,EAAO,GAAG9K,GACxB+Z,EAASjG,EAAKhJ,EAAO,GAAG7K,GACxB8G,EAAQqL,EAAgBuH,GAASH,GAAc,OAC/CQ,EAAI,YAAQF,EAAR,YAAkBC,EAAlB,YACRjP,EACCtN,QAAO,SAACC,EAAD,GAAkB,IAAXuC,EAAU,EAAVA,EAAGC,EAAO,EAAPA,EAChB,MAAM,GAAN,OAAUxC,EAAV,cAAmBoW,EAAK7T,GAAxB,YAA8B8T,EAAK7T,MAClC,KAEL,OAAO,qCACL,sBAAMrC,EAAGoc,EACPlF,KAAK,cACLK,OAAS/C,EAAgBrL,EAAQ,QAC5ByS,GAGL1O,EAAOvO,KAAI,WAASoJ,GAAT,IAAE3F,EAAF,EAAEA,EAAGC,EAAL,EAAKA,EAAL,OACT,wBAEEmJ,GAAIyK,EAAK7T,GACTkW,GAAIpC,EAAK7T,GACT6U,KAAO/N,EACPoP,EAAG,GAJExQ,YAWf,mBAAGrD,UAAU,oBAAb,SAEIiW,EAAWhc,KAAI,WAAmBoJ,GAAW,IAAD,mBAAnBmF,GAAmB,WAC1C,OACE,mBAAexI,UAAU,UAAzB,SAEIwI,EAAOvO,KAAI,WAA2B0d,GAAY,IAArCja,EAAoC,EAApCA,EAAGC,EAAiC,EAAjCA,EAAG4Z,EAA8B,EAA9BA,UAAW9S,EAAmB,EAAnBA,MAE5B,OACE,sBAEE/G,EAAG6T,EAAK7T,GACRC,EAAGqT,EAASoG,GAAUG,GAAaH,GAAUzZ,GAC7CuC,OAAS4Q,EAAiB,EAATK,GAAcwF,GAAQ3c,OACvC0N,OAAQ0P,GAAUzZ,GAClB6U,KAAM6E,GAAS5S,IALVkT,OANPtU,QAuBlB,oBAAGrD,UAAU,YAAb,UAEEwR,EAAKsB,OACLtB,EAAKsB,QACJ7Y,KAAI,SAAA8Y,GACH,IAAMrV,EAAIyT,EAAS,EACnB,OACE,8BACE,sBAAM6B,WAAW,MAAMtV,EAAGA,EAAGC,EAAG6T,EAAKuB,GAArC,SACGA,IAGH,sBACEN,GAAI/U,EAAKyT,EAAS,EAClBuB,GAAIlB,EAAKuB,GACTJ,GAAIxB,EACJyB,GAAIpB,EAAKuB,GACTF,OAAQ,YAVJE,MAgBZ,sBACEF,OAAQ,QACRH,GAAIvB,EACJyB,GAAI5B,EAASG,EACbsB,GAAItB,EACJwB,GAAIxB,OAGR,oBAAGnR,UAAU,cAAb,UACE,sBACE6S,OAAQ,QACRH,GAAI1B,EAASG,EACbyB,GAAI5B,EAASG,EACbsB,GAAItB,EACJwB,GAAI7B,EAAQK,EAAS,IAGvBI,EAAKuB,OACLvB,EAAKuB,QACJ7Y,KAAI,SAAA8Y,GACH,IAAMpV,EAAIqT,EAAkB,IAATG,EACnB,OACE,8BACE,mBAAGmB,UAAS,oBAAef,EAAKwB,GAApB,YAA6BpV,EAA7B,KAAZ,SACE,mBAAG2U,UAAW,cAAd,SACE,sBACEU,WAAW,MADb,SAGG+C,EAAUhD,SAIjB,sBACEL,GAAI1B,EAASG,EACbyB,GAAIjV,EAAa,GAATwT,EACRsB,GAAIlB,EAAKwB,GACTJ,GAAIpB,EAAKwB,GACTF,OAAQ,YAfJE,cAwBpB,cAACwC,GAAD,eAEO,CACD9F,YACA+F,iBACA7F,YACAD,WACAE,WACAC,eACAC,gBACAC,gBACA0F,YACAC,mBAEAzP,eAEAC,uBAEAiK,oBACA0F,yBACAzF,oBACAC,wBACAC,uBACAC,wBACAE,mBACAC,mBACA/J,uBACAgP,2BACAC,oBAEAhT,yBACAtF,iBACAwF,kBACAzF,UAEAwF,iBACAwC,sBAQC,SAASuS,GAAmCpe,GACzD,OACE,qBAAKwG,UAAU,oCAAf,SAEA,cAAC,IAAD,UAEI,SAAA2M,GAAU,OAAI,cAAC,GAAD,0CAA8BnT,GAAUmT,UCpa9D,ICsCekL,GA7CG,SAAC,GAKZ,IAJL3K,EAII,EAJJA,QACAC,EAGI,EAHJA,YACAN,EAEI,EAFJA,SACAC,EACI,EADJA,SACI,EACkCxM,oBAAS,GAD3C,mBACGkN,EADH,KACgBC,EADhB,KAEJ,OACE,sBAAKzN,UAAU,wCAAf,UACE,oCACE,gCACE,4BACE,wBAAQA,UAAWwN,EAAc,YAAa,GAAI9K,QAAS,kBAAM+K,GAAgBD,IAAjF,6CAIF,qBAAIxN,UAAS,oBAAewN,EAAc,YAAc,IAAxD,UACE,yGAGA,gDACgB,mBAAG9J,OAAO,QAAQ2L,KAAMlC,EAAxB,mDAEhB,sHAGA,6GAGA,2HAKJ,cAAC,WAAD,CAAUmC,SAAU,6CAApB,SACE,cAACpC,EAAD,MAEF,cAAC,GAAD,CAAWL,SAAUA,EAAUC,SAAUA,OAE3C,8BC8CSgL,GAnFA,CACb,CACEjc,MAAO,eACPmR,MAAO,gBACP+K,SAAU,cACVC,UCRWH,IDUb,CACEhc,MAAO,0BACPmR,MAAO,uBACP+K,SAAU,0BACVC,UCdWH,IDgBb,CACEhc,MAAO,+BACPmR,MAAO,oBACP+K,SAAU,sBACVC,UCpBWH,IDsBb,CACEhc,MAAO,qBACPmR,MAAO,qBACP+K,SAAU,uBACV/c,KAAM,uCACNgd,UAAW/K,IAEb,CACEpR,MAAO,4CACPmR,MAAO,wBACP+K,SAAU,0BACVC,UCjCWH,IDmCb,CACEhc,MAAO,4BACPmR,MAAO,gBACP+K,SAAU,uBACV/c,KAAM,uCACNgd,UAAW/K,IAEb,CACEpR,MAAO,yBACPmR,MAAO,aACP+K,SAAU,0BACV/c,KAAM,uCACNgd,UAAW/K,IAEb,CACEpR,MAAO,wBACPmR,MAAO,YACP+K,SAAU,mBACV/c,KAAM,mCACNgd,UAAWhE,IAEb,CACEnY,MAAO,oBACPmR,MAAO,kBACP+K,SAAU,iBACVC,UFpD0B,SAAC,GAMxB,IALL9K,EAKI,EALJA,QACAlS,EAII,EAJJA,KACAmS,EAGI,EAHJA,YACAN,EAEI,EAFJA,SACAC,EACI,EADJA,SAEMjK,EAAiB0F,mBAAQ,kBAAM5N,aAAsB,QAASK,KAAO,CAACA,IADxE,EAEkCsF,oBAAS,GAF3C,mBAEGkN,EAFH,KAEgBC,EAFhB,OAGoCnN,mBAAS,IAH7C,mBAGG2F,EAHH,KAGiByH,EAHjB,OAK8BpN,wBAASzG,GALvC,mBAKG4V,EALH,KAKcwE,EALd,OAMwC3T,wBAASzG,GANjD,mBAMG2b,EANH,KAMmByC,EANnB,OAO8B3X,wBAASzG,GAPvC,mBAOG8V,EAPH,KAOcuE,EAPd,OAQ4B5T,oBAAS,GARrC,mBAQGoP,EARH,KAQayE,EARb,OAS4B7T,oBAAS,GATrC,mBASGsP,EATH,KASawE,EATb,OAUoC9T,wBAASzG,GAV7C,mBAUGgW,EAVH,KAUiBwE,EAVjB,OAWsC/T,wBAASzG,GAX/C,mBAWGiW,EAXH,KAWkBwE,EAXlB,OAYsChU,wBAASzG,GAZ/C,mBAYGkW,EAZH,KAYkBwE,EAZlB,OAaoCjU,wBAASzG,GAb7C,oBAaGwL,GAbH,MAaiB4I,GAbjB,SAc8B3N,mBAAS,aAdvC,qBAcGmV,GAdH,MAccyC,GAdd,SAe4C5X,wBAASzG,GAfrD,qBAeG6b,GAfH,MAeqByC,GAfrB,SAgBwC7X,oBAAS,GAhBjD,qBAgBGhD,GAhBH,MAgBmBqQ,GAhBnB,SAiB0BrN,mBAAS,IAjBnC,qBAiBGjD,GAjBH,MAiBY0Q,GAjBZ,SAoBwDzN,mBAAS,MApBjE,qBAoBG+N,GApBH,MAoB2BC,GApB3B,SAqB4DhO,mBAAS,IArBrE,qBAqBGiO,GArBH,MAqB6BC,GArB7B,MAoCEM,GAAwB,SAAC,GAoBxB,IAnBM4F,EAmBP,EAnBJjF,UACgB2I,EAkBZ,EAlBJ5C,eACWb,EAiBP,EAjBJhF,UAEUiF,EAeN,EAfJlF,SACUmF,EAcN,EAdJjF,SAEckF,EAYV,EAZJjF,aACekF,EAWX,EAXJjF,cACekF,EAUX,EAVJjF,cAEcoF,EAQV,EARJlP,aACcmP,EAOV,EAPJ/P,aAEWgT,EAKP,EALJ5C,UACkB6C,EAId,EAJJ5C,iBAII,IAFJrY,QAASgY,OAEL,MAFoB,GAEpB,EADYC,EACZ,EADJhY,eAiBA,GAfA2W,EAAaS,GACbuD,EAAkBG,GAClBlE,EAAaS,GACbR,EAAYS,GACZR,EAAYS,GACZR,EAAgBS,GAChBR,EAAiBS,GACjBR,EAAiBS,GACjBtH,EAAgByH,GAChB+C,GAAaG,GACbF,GAAoBG,GACpBvK,GAAWsH,GACX1H,GAAkB2H,GAGdF,GAAoBtF,IAAkBiF,EACxC9G,GAAgBmH,QACX,GAAIL,EAAmB,CAC5B,IAAIpM,EAASoM,GAA2C,YAAtBA,EAAkCjT,EAAgBiT,EAAmBlS,EAAekS,GAAmB3Z,QAAQpB,aAAUH,EAErJ0e,EAAe,GACjB/U,EAAI,EACRX,EAAekS,GAAmB3Z,QAAQqB,SAAQ,SAAA2G,GAChDmV,EAAanV,GAAUuF,EAAOnF,GAC9BA,OAEFyK,GAAgBsK,QACPlT,IACT4I,QAAgBpU,IAIpB6G,qBAAU,WACR,IAAK2N,IAA0B5U,OAAOkG,KAAK4O,IAA0BvU,OAAQ,CAC3E,IAAMyU,EAAShV,OAAOkG,KAAK4O,IAA0B,GACrDD,GAA0BG,GAC1BK,GAAsBP,GAAyBE,OAEhD,CAACF,GAA0BF,KAM9B,OACE,cAAC,KAA4BQ,SAA7B,CAAsCrR,MAAO,CAC3CsR,yBACAG,wBAjF4B,SAACrT,EAAIpC,GACnCgV,GAA4B,2BACvBD,IADsB,kBAExB3S,EAAKpC,MA+EN0V,0BA3E8B,SAAAtT,GAChC,IAAMuT,EAAgB,eAAQZ,WACvBY,EAAiBvT,GACxB4S,GAA4BW,IAyE1Bd,0BACAC,6BACAc,oBAAqB,CACnBqG,aACAC,oBAEAjG,YACA+F,iBACA7F,YAEAD,WACAE,WAEAC,eACAC,gBAEA7J,eACAZ,gBAEAhI,WACAC,oBAxBJ,SA2BE,sBAAK0C,UAAU,kBAAf,UACE,oCACE,gCACE,4BACE,wBAAQA,UAAWwN,EAAc,YAAc,GAAI9K,QAAS,kBAAM+K,GAAgBD,IAAlF,6CAIF,qBAAIxN,UAAS,oBAAewN,EAAc,YAAc,IAAxD,UACE,yGAGA,gDACgB,mBAAG9J,OAAO,QAAQ2L,KAAMlC,EAAxB,mDAEhB,sHAGA,6GAGA,2HAKJ,cAAC,WAAD,CAAUmC,SAAU,6CAApB,SACE,cAACpC,EAAD,MAEF,cAAC,GAAD,CAAWL,SAAUA,EAAUC,SAAUA,OAE3C,gCACE,qBAAK9M,UAAU,MAAf,SACE,cAAC,GAAD,eAEK,CACDhF,OACA6H,iBAEA4M,YACA+F,iBACA9F,WACAC,YACAC,WACAC,eACAC,gBACAC,gBACA1K,gBACAY,eACAyP,oBACAD,aAEAvP,qBAnFe,SAAAqJ,GAC3B7B,EAAgB6B,IAoFJjS,kBACAD,WAEAuF,uBAAwB,kBAAM+K,IAAmBrQ,KACjDwF,gBAAiB,SAACQ,GAAD,OAAgByK,GAAWzK,IAE5C6M,kBAAmB,SAACvW,GAAD,OAASqa,EAAara,IACzCic,uBAAwB,SAACjc,GAAD,OAASqe,EAAkBre,IACnDwW,kBAAmB,SAACxW,GAAD,OAASsa,EAAata,IAEzC6W,iBAAkB,kBAAM0D,GAAazE,IACrCgB,iBAAkB,kBAAM0D,GAAaxE,IAErCS,sBAAuB,SAACzW,GAAD,OAAS0a,EAAiB1a,IACjD+M,qBAAsB,SAAA/M,GAAG,OAAIqU,GAAgBrU,IAE7Cgc,kBAAmB,SAAAhc,GAAG,OAAIse,GAAate,IACvC+b,yBAA0B,kBAAMwC,IAAqBzC,kBEzJjE1a,KAAM,oCE7CK,SAASwd,KACtB,IAAMC,EAAc,SAAC,GAAD,IAClBzd,EADkB,EAClBA,KACAmS,EAFkB,EAElBA,YACAD,EAHkB,EAGlBA,QACAwL,EAJkB,EAIlBA,cACA7L,EALkB,EAKlBA,SACAC,EANkB,EAMlBA,SANkB,OAQhB,cAAC,EAAD,CAAY1M,IAAKpF,EAAI,UAAM2d,qBAAN,iBAAqC3d,QAASnB,EAAnE,SAEI,SAAAmB,GAAI,OACF,cAAC0d,EAAD,eAEO,CACDvL,cACAD,UACAL,WACAC,WACA9R,cAQhB,OACE,cAAC,IAAD,UACE,sBAAKY,GAAG,UAAR,UACE,8BACE,6BAEIkc,GAAO7d,KAAI,WAAiBoJ,GAAjB,IAAExH,EAAF,EAAEA,MAAOmR,EAAT,EAASA,MAAT,OACT,oBAAgBhN,UAAU,oBAA1B,SACE,cAAC,IAAD,CAAM+M,GAAIC,EAAV,SACGnR,KAFIwH,UASjB,+BACE,eAAC,IAAD,WAEIyU,GAAO7d,KAAI,WAMRoJ,GAAW,IAJZ2J,EAIW,EAJXA,MACA+K,EAGW,EAHXA,SACA/c,EAEW,EAFXA,KACW0d,EACA,EADXV,UAEMnL,EAAWxJ,EAAQ,EAAIyU,GAAOzU,EAAQ,QAAKxJ,EAC3CiT,EAAWzJ,EAAQyU,GAAO9d,OAAS,EAAI8d,GAAOzU,EAAQ,QAAKxJ,EAC3DqT,EAAUnO,IAAM6Z,MAAK,kBAAM,OAAO,YAAuCb,OACzE5K,EAAW,UAAM0L,IAAN,mCAA2Cd,GAC5D,OACE,cAAC,IAAD,CAAmBL,KAAM1K,EAAzB,SACGyL,EAAY,CAACzd,OAAMmS,cAAaD,UAASwL,gBAAe7L,WAAUC,cADzDzJ,MAOlB,cAAC,IAAD,CAAU0J,GAAI+K,GAAO,GAAG9K,kBCnFpC,IAYe8L,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,+BAAqB1Z,MAAK,YAAkD,IAA/C2Z,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1BZ,O","file":"static/js/main.db788e5f.chunk.js","sourcesContent":["import { uniq } from \"lodash\";\nimport { min, max } from 'd3-array';\n\nconst serializeValue = val => {\n  if (typeof val === 'string')\n    return `'${val}'`;\n  else if (typeof val === 'object')\n    return JSON.stringify(val);\n  else return val;\n}\n\nconst buildComponentCode = (componentName, props) => `<${componentName} \n  ${Object.entries(props)\n    .filter(([_key, val]) => {\n      return !(val === undefined || val === false || val === '' || (Array.isArray(val) && !val.length))\n    })\n    .map(([key, val]) => `${key}={${serializeValue(val)}}`)\n    .join(' \\n  ')\n    .trim()\n  }\n/>`\n\nexport const buildGraphCode = props => buildComponentCode('GraphBlock', props)\n\nexport const buildIceCreamScatterPlotCode = props => buildComponentCode('IceCreamBlock', props)\nexport const buildLinearGraphCode = props => buildComponentCode('LinearGraphBlock', props)\n\nexport const computeFiltersOptions = (type, ...args) => {\n  switch (type) {\n    case 'table':\n      return computeTableOptions(...args);\n    case 'graph':\n    default:\n      return computeGraphFiltersOptions(...args);\n  }\n}\n\nconst computeTableOptions = data => {\n  return data.columns.reduce((res, key) => {\n    const options = uniq(data.map(d => d[key]))\n    let type = 'string';\n\n    // if number\n    if (!options.find(o => isNaN(+o))) {\n      if (!options.find(o => !Number.isInteger(+o))) {\n        type = 'integer';\n      } else {\n        type = 'float'\n      }\n    }\n    const props = {\n      id: key,\n      title: key,\n      type,\n      options\n    }\n    if (['float', 'integer'].includes(type)) {\n      props.options = props.options.map(o => +o);\n      props.min = min(props.options);\n      props.max = max(props.options);\n    }\n    return {\n      ...res,\n      [key]: props\n    }\n  }, {})\n}\nexport const computeGraphFiltersOptions = (graph, gexfData) => {\n  const domparser = new DOMParser()\n  const doc = domparser.parseFromString(gexfData, 'application/xml')\n  const attrs = doc.querySelectorAll('attributes.node attribute');\n  const categories = [];\n\n  const FORBIDDEN_ATTRS = ['weight'];\n\n  attrs.forEach(attr => {\n    const id = attr.getAttribute('id');\n    if (FORBIDDEN_ATTRS.includes(id)) return;\n\n    const title = attr.getAttribute('title');\n    const type = attr.getAttribute('type');\n    categories.push({\n      id,\n      title,\n      type,\n      options: new Set()\n    })\n  })\n  graph.forEachNode((_node, props) => {\n    categories.forEach(cat => {\n      if (!cat.options.has(props[cat.id]))\n        cat.options.add(props[cat.id])\n    })\n  })\n  return categories.reduce((res, cat) => ({ ...res, [cat.id]: cat }), {});\n}\n\nexport const evalIfNodeMatches = (attributes, filters, filtersModeAnd) => {\n  if (filtersModeAnd) {\n    const oneFilterDoesNotMatches = filters.find(({ attribute, value }) => attributes[attribute] !== '' + value) !== undefined;\n    return !oneFilterDoesNotMatches;\n  } else {\n    const oneFilterMatches = filters.find(({ attribute, value }) => attributes[attribute] === '' + value) !== undefined;\n    return oneFilterMatches;\n  }\n}\n\nconst radiansToDegrees = radians => radians * (180 / Math.PI);\nexport const degreesToRadians = degrees => degrees * (Math.PI / 180);\n\nexport const cartesianToPolar = (x, y) => {\n  const distance = Math.sqrt(x * x + y * y);\n  const radians = Math.atan2(y, x);\n  const degrees = radiansToDegrees(radians);\n  return { distance, radians, degrees }\n}\n\nexport const polarToCartesian = (distance, degrees) => {\n  const radians = degreesToRadians(degrees);\n  return {\n    x: distance * Math.cos(radians),\n    y: distance * Math.sin(radians)\n  }\n}\n\nexport const transformGeometry = ({ x, y }, { rotate, translate }) => {\n  const { degrees, distance } = cartesianToPolar(x, y);\n  let finalDegrees = degrees;\n  if (rotate) {\n    finalDegrees += rotate;\n  }\n  let { x: newX, y: newY } = polarToCartesian(distance, finalDegrees);\n  if (translate) {\n    if (translate.x) {\n      newX += translate.x;\n    }\n    if (translate.y) {\n      newY += translate.y;\n    }\n  }\n  return { x: newX, y: newY }\n}","import React from 'react';\n\nexport const VisualizationControlContext = React.createContext({\n\n})","var map = {\n\t\"./00_home.mdx\": [\n\t\t348,\n\t\t11\n\t],\n\t\"./01_couverture_media.mdx\": [\n\t\t349,\n\t\t12\n\t],\n\t\"./02_detectcritic.mdx\": [\n\t\t350,\n\t\t13\n\t],\n\t\"./03_graphclusters.mdx\": [\n\t\t351,\n\t\t3\n\t],\n\t\"./04_timelineclusters.mdx\": [\n\t\t352,\n\t\t14\n\t],\n\t\"./05_toporobotalgo.mdx\": [\n\t\t353,\n\t\t4\n\t],\n\t\"./06_explore_entities.mdx\": [\n\t\t354,\n\t\t5\n\t],\n\t\"./07_IssueVERB.mdx\": [\n\t\t355,\n\t\t6\n\t],\n\t\"./08_NERdate.mdx\": [\n\t\t359,\n\t\t10\n\t],\n\t\"./dates-analysis.mdx\": [\n\t\t356,\n\t\t7\n\t],\n\t\"./graph-critics.mdx\": [\n\t\t357,\n\t\t8\n\t],\n\t\"./verbs-analysis.mdx\": [\n\t\t358,\n\t\t9\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 344;\nmodule.exports = webpackAsyncContext;","import React, {useEffect, useState} from 'react';\nimport axios from 'axios';\nimport { csvParse, tsvParse } from 'd3-dsv';\n\nconst Loader = ({percentsLoaded = 0}) =>{\n  return  (\n    <div className=\"loader-container\">\n      <div className=\"loader\">\n        <div className=\"loading-bar\" style={{width: percentsLoaded + '%'}} />\n      </div>\n   </div>\n)\n}\n\nconst DataLoader = ({url, children}) => {\n  const [data, setData] = useState(null);\n  const [loadingFraction, setLoadingFraction] = useState(0);\n  useEffect(() => {\n    if (url) {\n      axios.get(url, {\n        onDownloadProgress: progressEvent => {\n          const status = progressEvent.loaded / progressEvent.total;\n          setLoadingFraction(status);\n        }\n      })\n      .then(({data: inputData}) => {\n        setTimeout(() => {\n          let data = inputData;\n          if (url.split('.').pop() === 'csv') {\n            data = csvParse(inputData);\n          } else if (url.split('.').pop() === 'tsv') {\n            data = tsvParse(inputData);\n          }\n          setData(data);\n        })\n      })\n    }\n  }, [url]);\n\n  if (!url) {\n    return children();\n  }\n\n  return data ? children(data)\n  : \n  <Loader percentsLoaded={loadingFraction * 100} />\n}\n\n\nexport default DataLoader;","import DataLoader from './DataLoader'\n\nexport default DataLoader","import iwanthue from 'iwanthue';\n\nconst DEFAULT_COLOR_SPACE = {\n  cmin: 25.59,\n  cmax: 55.59,\n  lmin: 60.94,\n  lmax: 90.94\n};\n\nconst SINGLE_COLOR_PALETTE = ['#999'];\n\nexport function generatePalette(name, count) {\n  if (count === 1 || !count) return SINGLE_COLOR_PALETTE;\n  else if (count === 2) {\n    return ['#D77186', '#61A2DA']\n  }\n\n  return iwanthue(count, {\n    colorSpace: DEFAULT_COLOR_SPACE,\n    seed: name,\n    clustering: 'force-vector'\n  });\n}","import {useRef, useEffect} from 'react';\n// import Graph from 'graphology-types';\n\n\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\n","import ControlButton from './ControlButton';\n\nexport default ControlButton;","import React from 'react';\n\nexport default function ControlButton({children, onClick}) {\n  return (\n    <button className=\"control-button\" onClick={onClick}>\n      {children}\n    </button>\n  );\n}","import FiltersEditor from './FiltersEditor';\n\nexport default FiltersEditor;","\nimport React, {useState} from 'react';\n\nimport ControlButton from '../ControlButton';\n\nexport default function FiltersEditor ({\n  onToggleFiltersModeAnd,\n  filtersModeAnd,\n  filtersOptions,\n  onFiltersChange,\n  filters\n}) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [newFilterAttribute, setNewFilterAttribute] = useState(undefined);\n\n  let newFilterOptions = [];\n  if (newFilterAttribute) {\n    filtersOptions[newFilterAttribute].options.forEach(option => newFilterOptions.push(option))\n  }\n\n  const handleNewFilterSubmit = (e) => {\n    const value = e.target.value;\n    onFiltersChange([\n      ...filters,\n      {\n        attribute: newFilterAttribute,\n        value\n      }\n    ])\n    setNewFilterAttribute(undefined);\n  }\n  const handleNewFilterChange = e => {\n    const val = e.target.value;\n    if (val.length)\n      setNewFilterAttribute(val)\n  }\n  return (\n    <div className=\"FiltersEditor\">\n      <div>\n        <button className={isOpen ? 'is-active' : ''} onClick={() => setIsOpen(!isOpen)}>\n          Filtres ...\n        </button>\n      </div>\n      {\n        isOpen &&\n        <div>\n          <ControlButton  onClick={onToggleFiltersModeAnd}>\n            Mode des filtres: {filtersModeAnd ? 'AND (intersection des filtres)' : 'OR (union des filtres)'}\n          </ControlButton>\n          {filters.length ?\n          <div>\n            <h6>Filtres existants</h6>\n            <ul className=\"existing-filters\">\n              {\n                filters.map(({attribute, value}, index) => {\n                  const handleDelete = () => {\n                    let newFilters = filters.filter((f, i) => i !== index);\n                    onFiltersChange(newFilters);\n                  }\n                  return (\n                    <li key={index}>\n                      <div>\n                        {attribute} : {value}\n                      </div>\n                      <div>\n                        <button onClick={handleDelete}>\n                        🗑\n                        </button>\n                      </div>\n                    </li>\n                  )\n                })\n              }\n            </ul>\n          </div>\n          : null\n        }\n          <div>\n            <h6>Ajouter un nouveau filtre</h6>\n            <select value={newFilterAttribute || ''} onChange={handleNewFilterChange}>\n              {\n                Object.entries(filtersOptions).map(([id, {title}], index) => {\n                  return (\n                    <option value={id} key={index}>{title}</option>\n                  )\n                })\n              }\n              <option value=\"\">Selectionner</option>\n            </select>\n            {\n              newFilterAttribute !== undefined ?\n              <select value={''} onChange={handleNewFilterSubmit}>\n                {\n                  newFilterOptions\n                  .sort((a, b) => {\n                    if (a > b) {\n                      return 1;\n                    }\n                    return -1;\n                  })\n                  .map((id, index) => {\n                    return (\n                      <option value={id} key={index}>{id}</option>\n                    )\n                  })\n                }\n                <option value=\"\">Selectionner</option>\n              </select>\n              : null\n            }\n          </div>\n        </div>\n      }\n      \n    </div>\n  )\n}","import VariablesEditor from './VariablesEditor';\n\nexport default VariablesEditor;","import React, {useState} from 'react';\n\nexport default function VariablesEditor ({\n  options,\n  variables,\n}) {\n  const [isOpen, setIsOpen] = useState(false);\n  const isNotAllDefault = variables.find(v => v.value !== 'default' && v.value !== undefined) !== undefined;\n  return (\n    <div className=\"FiltersEditor VariablesEditor\">\n      <div>\n        <button className={isOpen || isNotAllDefault ? 'is-active' : ''} onClick={() => setIsOpen(!isOpen)}>\n          Variables ...\n        </button>\n      </div>\n      {\n        (isOpen || isNotAllDefault) &&\n        <div>\n          {\n            variables.map(({title, value, onChange, type, localOptions}, index) => {\n              const getOptions = () => {\n                switch(type) {\n                  case 'color':\n                  case 'string':\n                    if (localOptions) {\n                      return localOptions;\n                    }\n                    return  Object.entries(options)\n                  case 'boolean':\n                    return [['true', {title: 'Oui'}], ['false', {title: 'Non'}]]\n                  case 'number':\n                  default:\n                    return Object.entries(options)\n                    .filter(([_id, option]) => ['integer', 'float'].includes(option.type))\n                }\n              }\n              const activeOptions = [\n                {\n                  value: 'default',\n                  title: 'Défaut'\n                },\n                ...getOptions()\n                  .map(([id, option]) => ({\n                    label: option.title,\n                    value: id\n                  }))\n              ]\n\n              if (activeOptions.length <= 1) {\n                return null;\n              }\n              return (\n                <div key={index}>\n                  <h6>{title} </h6>\n                  <select value={value} onChange={e => {\n                      const newVal = e.target.value;\n                      if (type === 'boolean') {\n                        return onChange(newVal === 'true' ? true : false)\n                      }\n                      return onChange(newVal)\n                    }}>\n                    {\n                      activeOptions.map(({value, label}) => (\n                        <option key={value} value={value}>\n                          {label || 'Défaut'}\n                        </option>\n                      ))\n                    }\n                  </select>\n                </div>\n              )\n            })\n          }\n        </div>\n      }\n      \n    </div>\n  )\n}","\nimport React, {useState, useEffect} from 'react';\nimport { SketchPicker } from 'react-color';\nimport debounce from 'lodash/debounce';\n\nconst ColorItemHandler = ({\n  modality,\n  onChange,\n  color\n}) => {\n  const [isEdited, setEdited] = useState(false);\n  const [editedColor, setEditedColor] = useState(color);\n  useEffect(() => {\n    setEditedColor(color)\n  }, [color]);\n  const debouncedOnChange = debounce(onChange, 300);\n  const handleChange = newColor => {\n    setEditedColor(newColor.hex);\n    debouncedOnChange(newColor.hex);\n  }\n  const handleClose = () => {\n    onChange(editedColor);\n    setEdited(false);\n  }\n  return (\n    <li>\n      <span onClick={() => setEdited(!isEdited)} className=\"legend-color\" style={{background: color}} />\n      <span className=\"legend-modality\">{modality}</span>\n      {\n        isEdited ?\n        <>\n          <div onClick={handleClose} className=\"color-picker-container\">\n            <div onClick={e => {e.stopPropagation()}}>\n              <h5>Choisir la couleur de la modalité \"{modality}\"</h5>\n              <SketchPicker onChange={handleChange} color={editedColor} />\n            </div>\n          </div>\n        </>\n        : null\n      }\n    </li>\n  )\n}\n\nexport default function ColorLegend ({\n  colorPalette,\n  onChange,\n}) {\n  if (!colorPalette) {\n    return null;\n  }\n  return (\n    <div className=\"ColorLegend\" >\n      <h6>Légende</h6>\n      <ul>\n        {\n          Object.entries(colorPalette)\n          .map(([modality, color]) => {\n            const handleChange = newColor => {\n              onChange({\n                ...colorPalette,\n                [modality] : newColor\n              })\n            }\n            return (\n              <ColorItemHandler onChange={handleChange} key={modality} {...{modality, color}} />\n            )\n          })\n        }\n      </ul>\n    </div>\n  );\n}","import ColorLegend from './ColorLegend';\n\nexport default ColorLegend;","import React, {useEffect, useState} from 'react';\nimport cx from 'classnames';\nimport Slider from 'rc-slider';\nimport debounce from 'lodash/debounce';\n\nimport ControlButton from '../ControlButton';\nimport FiltersEditor from '../FiltersEditor';\nimport VariablesEditor from '../VariablesEditor';\nimport ColorLegend from '../ColorLegend';\n\nconst SLIDER_MARKS = {\n  '0.25': 'défaut'\n};\n\nfunction DebouncedSlider({defaultValue, onChange}) {\n  const [value, setValue] = useState(defaultValue);\n\n  useEffect(() => {\n    setValue(defaultValue);\n  }, [defaultValue])\n\n  const onSliderChange = newValue => {\n    setValue(newValue);\n    onChange(newValue);\n  };\n\n  return (\n    <Slider\n      min={0}\n      max={1}\n      step={0.01}\n      defaultValue={defaultValue}\n      value={value}\n      onChange={onSliderChange}\n      marks={SLIDER_MARKS}\n    />\n  );\n}\n\n\nexport default function GraphControls({\n  rescale, \n  zoomIn, \n  zoomOut, \n  searchString = '',\n  onSearchStringChange,\n  filtersModeAnd,\n  onToggleFiltersModeAnd,\n  labelDensity,\n\n  nodeSizeVariable,\n  nodeColorVariable,\n  nodeLabelVariable,\n\n  filtersOptions,\n  filters = [],\n  colorPalette,\n\n  onFiltersChange,\n  onNodeSizeVariableChange,\n  onNodeColorVariableChange,\n  onNodeLabelVariableChange,\n  onLabelDensityChange,\n  onColorPaletteChange,\n}) {\n  const handleSearchChange = e => onSearchStringChange(e.target.value);\n  const [isMinified, setIsMinified] = useState(true)\n  return (\n    <>\n      <button onClick={() => setIsMinified(!isMinified)} className={cx('minify-button', {'is-active': !isMinified})}>\n        {'éditer'}\n      </button>\n      <ul className={cx(\"VisControls GraphControls\", {'is-minified': isMinified})}>\n        \n        <li className=\"vis-controls-item camera\">\n        \n        <ControlButton onClick={zoomOut}>\n          -\n        </ControlButton>\n        <ControlButton onClick={zoomIn}>\n          +\n        </ControlButton>\n        <ControlButton onClick={rescale}>\n          Recentrer\n        </ControlButton>\n        </li>\n        <li className=\"vis-controls-item\">\n          <form onSubmit={e => e.preventDefault()}>\n            <input type=\"text\" onChange={handleSearchChange} placeholder=\"rechercher\" value={searchString} />\n          </form>\n        </li>\n        \n        <li className=\"vis-controls-item\">\n          <VariablesEditor\n            {\n              ...{\n                options: filtersOptions,\n                variables: [{\n                    title: 'Taille des noeuds',\n                    onChange: onNodeSizeVariableChange,\n                    value: nodeSizeVariable,\n                    type: 'number'\n                  },\n                  {\n                    title: 'Couleur des noeuds',\n                    value: nodeColorVariable,\n                    onChange: onNodeColorVariableChange,\n                    type: 'color'\n                  },\n                  {\n                    title: 'Label des noeuds',\n                    value: nodeLabelVariable,\n                    onChange: onNodeLabelVariableChange,\n                    type: 'string'\n                  }\n                ],\n              }\n            }\n          />\n        </li>\n        \n        <li className=\"vis-controls-item\">\n        <FiltersEditor\n          {\n            ...{\n              onToggleFiltersModeAnd,\n              filtersModeAnd,\n              filtersOptions,\n              onFiltersChange,\n              filters\n            }\n          }\n        />\n        </li>\n        <li className=\"vis-controls-item slider-wrapper\">\n          <form onSubmit={e => e.preventDefault()}>\n            <h5>Densité des labels</h5>\n            <div className=\"slider-container\">\n                <DebouncedSlider\n                  defaultValue={labelDensity}\n                  onChange={debounce(onLabelDensityChange, 300)}\n                />\n              </div>\n          </form>\n        </li>\n        {\n            nodeColorVariable && nodeColorVariable !== 'default' ?\n            <ColorLegend\n              colorPalette={colorPalette}\n              onChange={onColorPaletteChange}\n            />\n            : null\n          }\n      </ul>\n    </>\n  );\n}","import Color from 'color';\nimport {scaleLinear} from 'd3-scale';\nimport {evalIfNodeMatches} from '../../helpers/misc';\n\n\n// Defaults\nconst DEFAULT_NODE_COLOR = '#999';\nconst DEFAULT_NODE_SIZE_RANGE = [2, 15];\n\nexport function createNodeReducer({\n  nodeColor,\n  nodeSize,\n  nodeLabel,\n  nodeSizeFactor = 1,\n  extents,\n  filters = [],\n  filtersModeAnd,\n  colorPalette,\n}) {\n  let nodeSizeScale = null;\n\n  // Creating scales\n  if (!nodeSize) {\n    nodeSizeScale = scaleLinear()\n      .domain([extents.nodeSize.min, extents.nodeSize.max])\n      .range(DEFAULT_NODE_SIZE_RANGE);\n  } else {\n    nodeSizeScale = scaleLinear()\n      .domain([nodeSize.min, nodeSize.max])\n      .range(DEFAULT_NODE_SIZE_RANGE);\n  }\n  // Creating actual reducer\n  const nodeReducer = function (key, attr) {\n    const renderedNode = {\n      x: attr.x,\n      y: attr.y\n    };\n\n    // Color\n    if (!nodeColor) {\n      renderedNode.color = attr.color || DEFAULT_NODE_COLOR;\n    } else if (colorPalette) {\n      renderedNode.color = colorPalette[attr[nodeColor.name]] || DEFAULT_NODE_COLOR;\n    } else {\n      renderedNode.color =\n        nodeColor.palette[attr[nodeColor.name]] || DEFAULT_NODE_COLOR;\n    }\n    // Size\n    if (!nodeSize) {\n      let v = attr.size || 1;\n      renderedNode.size = nodeSizeScale(v);\n    } else {\n      let v = attr[nodeSize.name];\n      v = typeof v === 'number' ? v : 1;\n      renderedNode.size = nodeSizeScale(v);\n    }\n\n    renderedNode.size *= nodeSizeFactor;\n\n    // hidden\n    if (filters.length && evalIfNodeMatches(attr, filters, filtersModeAnd) === false) {\n      renderedNode.hidden = true;\n      renderedNode.label = '';\n    } else {\n      renderedNode.hidden = false;\n      // Label\n      if (!nodeLabel) {\n        renderedNode.label = attr.label || key;\n      } else {\n        renderedNode.label = nodeLabel === 'default' ? attr.label || key : attr[nodeLabel] || '';\n      }\n    }\n\n    return renderedNode;\n  };\n\n  return nodeReducer;\n}\n\n\nexport function createEdgeReducer({\n  nodeColor,\n  nodeSize,\n  // nodeLabel,\n  // nodeSizeFactor = 1,\n  // extents,\n  // filters = [],\n  // filtersModeAnd,\n  edgesMap,\n  colorPalette,\n}) {\n\n  \n  // Creating actual reducer\n  const edgeReducer = function (key, attr, el1, el2) {\n    const {\n      sourceNode, \n      targetNode\n    } = edgesMap.get(key);\n    const renderedEdge = {};\n    // color with biggest node\n    const sourceNodeSize = nodeSize ? sourceNode[nodeSize.name] : sourceNode.size;\n    const targetNodeSize = nodeSize ? targetNode[nodeSize.name] : targetNode.size;\n    const biggerNode = sourceNodeSize > targetNodeSize ? sourceNode : targetNode;\n\n    // Color\n    if (biggerNode) {\n      if (!nodeColor) {\n        renderedEdge.color = biggerNode.color || DEFAULT_NODE_COLOR;\n      } else if (colorPalette) {\n        renderedEdge.color = colorPalette[biggerNode[nodeColor.name]] || DEFAULT_NODE_COLOR;\n      }  else {\n        renderedEdge.color =\n          nodeColor.palette[biggerNode[nodeColor.name]] || DEFAULT_NODE_COLOR;\n      }\n      renderedEdge.color = Color(renderedEdge.color).lighten(0.4).rgb().string();\n    }\n    return renderedEdge;\n  };\n\n  return edgeReducer;\n}","import React, {useCallback, useRef, useState, useEffect, useMemo} from 'react';\n// import Graph from 'graphology';\nimport {WebGLRenderer} from 'sigma';\nimport {scaleLinear} from 'd3-scale';\n// import colorParse from 'parse-color';\nimport {min, max} from 'd3-array';\nimport ContainerDimensions from 'react-container-dimensions';\n\n\nimport {\n  usePrevious, \n} from './hooks';\nimport GraphControls from './GraphControls';\nimport {createNodeReducer, createEdgeReducer} from './reducers';\nimport {generatePalette} from '../../helpers/palettes';\n\nimport './GraphContainer.css';\n\n\n\n// Camera controls\nfunction rescale(renderer) {\n  const camera = renderer.getCamera();\n  camera.animatedReset(renderer);\n}\n\nfunction zoomIn(renderer) {\n  const camera = renderer.getCamera();\n  camera.animatedZoom(renderer);\n}\n\nfunction zoomOut(renderer) {\n  const camera = renderer.getCamera();\n  camera.animatedUnzoom(renderer);\n}\n\n\nfunction GraphContainer({\n  graph,\n  width,\n  height,\n  // nodeColor,\n  // nodeSize,\n  labelDensity,\n  extents,\n\n  searchString = '',\n  onSearchStringChange,\n\n  filtersModeAnd,\n  onToggleFiltersModeAnd,\n\n  filtersOptions = {},\n  filters = [],\n  onFiltersChange,\n\n  onCameraUpdate,\n\n  cameraPosition,\n\n  updateTimestamp,\n\n  nodeSizeVariable,\n  nodeColorVariable,\n  colorPalette,\n  nodeLabelVariable,\n  onNodeSizeVariableChange,\n  onNodeColorVariableChange,\n  onNodeLabelVariableChange,\n  onLabelDensityChange,\n  onColorPaletteChange,\n}) {\n  const CELL_HEIGHT_RANGE = [height / 5, height / 1000];\n  const CELL_WIDTH_RANGE = [width / 5, width / 1000];\n  const cellHeightScale = scaleLinear().domain([0, 1]).range(CELL_HEIGHT_RANGE);\n  const cellWidthScale = scaleLinear().domain([0, 1]).range(CELL_WIDTH_RANGE);\n\n\n  const nodeSize = useMemo(() => {\n    if (nodeSizeVariable && nodeSizeVariable !== 'default' && filtersOptions[nodeSizeVariable]) {\n      const values = Array.from(filtersOptions[nodeSizeVariable].options)\n      return {\n        min: min(values),\n        max: max(values),\n        name: nodeSizeVariable\n      }\n    } else return undefined;\n  }, [nodeSizeVariable])\n\n  const nodeColor = useMemo(() => {\n    if (nodeColorVariable && nodeColorVariable !== 'default' && filtersOptions[nodeColorVariable]) {\n      const colors = generatePalette(nodeColorVariable, filtersOptions[nodeColorVariable].options.size);\n      let palette = {};\n      let i = 0;\n      filtersOptions[nodeColorVariable].options.forEach(option => {\n        palette[option] = colors[i];\n        i++;\n      });\n      return {\n        palette,\n        name: nodeColorVariable\n      }\n    } else return undefined;\n  }, [nodeColorVariable])\n\n  const edgesMap = useMemo(() => {\n    const m = new Map()\n    graph.forEach(\n      (_source, _target, sourceAttributes, targetAttributes, edge, _edgeAttributes) => {\n      m.set(edge, {sourceNode: sourceAttributes, targetNode: targetAttributes})\n    });\n    return m;\n  }, [graph])\n\n  const previousNodeColor = usePrevious(nodeColor);\n  const previousNodeSize = usePrevious(nodeSize);\n  const previousNodeLabelVariable = usePrevious(nodeLabelVariable);\n  const previousLabelDensity = usePrevious(labelDensity);\n  const previousSearchString = usePrevious(searchString);\n  const previousFilters = usePrevious(filters);\n  const previousColorPalette = usePrevious(colorPalette);\n\n  const nodeReducer = createNodeReducer({\n    nodeColor,\n    nodeSize,\n    nodeLabel: nodeLabelVariable,\n    extents,\n    filters,\n    filtersModeAnd,\n    colorPalette,\n  });\n  \n  const edgeReducer = createEdgeReducer({\n    nodeColor,\n    colorPalette,\n    // nodeSize,\n    // nodeLabel,\n    // extents,\n    filters,\n    filtersModeAnd,\n    edgesMap,\n  });\n\n  const container = useRef(null);\n  const [renderer, setRenderer] = useState(null);\n\n\n  useEffect(() => {\n    if (cameraPosition && renderer) {\n        const camera = renderer.getCamera();\n        // console.log('animate camera', camera);\n        camera.animate(cameraPosition);     \n    }  \n  }, [updateTimestamp])\n\n  // Should we refresh?\n  if (renderer) {\n    let needToRefresh = false;\n\n    if (\n      previousNodeColor !== nodeColor ||\n      previousNodeSize !== nodeSize ||\n      previousNodeLabelVariable !== nodeLabelVariable ||\n      previousColorPalette !== colorPalette ||\n      // previousSearchString !== searchString ||\n      previousFilters !== filters\n    ) {\n      // console.log('Refreshing sigma');\n\n      // TODO: use upcoming #.setNodeReducer\n      renderer.settings.nodeReducer = nodeReducer;\n      renderer.settings.edgeReducer = edgeReducer;\n      needToRefresh = true;\n    }\n\n    if (previousLabelDensity !== labelDensity) {\n      renderer.settings.labelGrid.cell = {\n        width: cellWidthScale(labelDensity),\n        height: cellHeightScale(labelDensity)\n      };\n\n      // TODO from nansi: we can improve sigma to handle this\n      renderer.displayedLabels = new Set();\n      needToRefresh = true;\n    }\n\n    if (previousSearchString !== searchString) {\n      if (searchString.length >= 3) {\n        graph.forEachNode((id, attributes) => {\n          const {label} = attributes;\n          if (label.toLowerCase().includes(searchString.toLowerCase())) {\n            renderer.highlightNode(id)\n          } else renderer.unhighlightNode(id)\n        })\n      } else if (renderer.highlightedNodes.size > 0) {\n        renderer.highlightedNodes = new Set();\n      }\n    }\n\n    if (needToRefresh) {\n      renderer.refresh();\n    }\n  }\n\n  const setContainer = useCallback(\n    node => {\n      if (renderer && renderer.graph !== graph) {\n        renderer.kill();\n        setRenderer(null);\n      }\n\n      if (node && graph) {\n       \n        const newRenderer = new WebGLRenderer(graph, node, {nodeReducer, edgeReducer});\n        setRenderer(newRenderer);\n        const camera = newRenderer.getCamera();\n        onCameraUpdate(camera.getState())\n        camera.on('updated', state => {\n          onCameraUpdate(state);\n        })\n      }\n\n      container.current = node;\n    },\n    [graph] /* eslint react-hooks/exhaustive-deps : 0 */\n  );\n  return (\n    <div className=\"VisContainer GraphContainer\">\n\n      <div ref={setContainer} style={{width: '100%', height: '100%'}}></div>\n      {renderer && (\n        <GraphControls\n          rescale={rescale.bind(null, renderer)}\n          zoomIn={zoomIn.bind(null, renderer)}\n          zoomOut={zoomOut.bind(null, renderer)}\n          {\n            ...{\n              searchString,\n              onSearchStringChange,\n              filtersModeAnd,\n              onToggleFiltersModeAnd,\n              filtersOptions,\n              filters,\n              onFiltersChange,\n              nodeSizeVariable,\n              nodeColorVariable,\n              nodeLabelVariable,\n              labelDensity,\n              onNodeSizeVariableChange,\n              onNodeColorVariableChange,\n              onNodeLabelVariableChange,\n              onColorPaletteChange,\n              onLabelDensityChange,\n              colorPalette: colorPalette || (nodeColor && nodeColor.palette),\n            }\n          }\n        />\n      )}\n    </div>\n  );\n}\n\nexport default function GraphContainerWithDimensions(props) {\n  return (\n    <div className=\"VisContainer IcecreamContainer\">\n\n    <ContainerDimensions>\n      {\n        dimensions => <GraphContainer {...{...props, ...dimensions}} />\n      }\n    </ContainerDimensions>\n    </div>\n  )\n}","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport cx from 'classnames'\n\nconst FooterNav = ({\n  prevPage,\n  nextPage\n}) => {\n  return (\n    <footer className={cx(\"FooterNav\", {'start-page': !prevPage})}>\n      <ul>\n        {\n          prevPage ?\n            <li className=\"previous-page\">\n              <h5>\n                <Link to={prevPage.route}>\n                  <div className=\"marker\">{'<'}</div>\n                  <div className=\"page-content\">\n                    <div className=\"page-label\"><i>Page précédente</i></div>\n                    <div>\n                        {prevPage.title}\n                    </div>\n                  </div>\n                </Link>\n              </h5>\n            </li>\n            :\n            null\n        }\n        {\n          nextPage ?\n            <li className=\"next-page\">\n              <h5>\n                <Link to={nextPage.route}>\n                  <div>\n                    <div className=\"page-label\"><i>Page suivante</i></div>\n                    <div className=\"page-content\">\n                        {nextPage.title}\n                    </div>\n                  </div>\n                  <div className=\"marker\">{'>'}</div>\n                </Link>\n              </h5>\n            </li>\n            :\n            null\n        }\n      </ul>\n    </footer>\n  )\n}\n\nexport default FooterNav;","import FooterNav from './FooterNav';\n\nexport default FooterNav;","import GraphAnnotation from './GraphAnnotation';\n\nexport default GraphAnnotation;","import React, {useState, useMemo, useEffect, Suspense} from 'react';\nimport {extent} from 'd3-array';\nimport {generatePalette} from '../../helpers/palettes';\n\n\nimport gexf from 'graphology-gexf';\nimport Graph from 'graphology';\n\nimport GraphVis from './GraphContainer';\nimport FooterNav from '../FooterNav';\n// import CodeContainer from '../../components/CodeContainer';\nimport {computeFiltersOptions} from '../../helpers/misc';\n\nimport {VisualizationControlContext} from '../../contexts';\n\nconst DEFAULT_LABEL_DENSITY = 0.25;\n\nconst GraphAnnotation = ({\n  Content,\n  data,\n  contentsURL,\n  prevPage,\n  nextPage,\n}) => {\n  const graph = useMemo(() => {\n    return gexf.parse(Graph, data);\n  }, [data]);\n  const filtersOptions = useMemo(() => computeFiltersOptions('graph', graph, data), [graph, data]);\n\n  const [cameraPosition, setCameraPosition] = useState(undefined);\n  const [helpVisible, setHelpVisible] = useState(false);\n  const [searchString, setSearchString] = useState('');\n  const [filtersModeAnd, setFiltersModeAnd] = useState(false);\n  const [updateTimestamp, setUpdateTimeStamp] = useState(new Date().getTime());\n  const [filters, setFilters] = useState([]);\n  const [nodeColorVariable, setNodeColorVariable] = useState(undefined);\n  const [colorPalette, setColorPalette] = useState(undefined);\n  const [nodeSizeVariable, setNodeSizeVariable] = useState(undefined);\n  const [nodeLabelVariable, setNodeLabelVariable] = useState(undefined);\n  const [labelDensity, setLabelDensity] = useState(DEFAULT_LABEL_DENSITY);\n\n  const [focusedVisualizationId, setFocusedVisualizationId] = useState(null);\n  const [registeredVisualizations, setRegisteredVisualizations] = useState({});\n\n  const onRegisterVisualization = (id, props) => {\n    setRegisteredVisualizations({\n      ...registeredVisualizations,\n      [id]: props\n    })\n  }\n\n  const onUnregisterVisualization = id => {\n    const copyOfRegistered = {...registeredVisualizations};\n    delete copyOfRegistered[id]\n    setRegisteredVisualizations(copyOfRegistered)\n  }\n\n  useEffect(() => {\n    if (!focusedVisualizationId && Object.keys(registeredVisualizations).length) {\n      const thatId = Object.keys(registeredVisualizations)[0];\n      setFocusedVisualizationId(thatId )\n    }\n  }, [registeredVisualizations, focusedVisualizationId])\n\n  let sizes = [];\n  graph.forEachNode((node, attributes) => {\n    sizes.push(attributes.size);\n  })\n  const sizeExtent = extent(sizes);\n\n  const onCameraUpdate = state => {\n    const {x, y, ratio} = state;\n    setCameraPosition({x, y, ratio});\n  }\n  const onVisualizationUpdate = ({\n    x, \n    y, \n    ratio, \n    searchString, \n    filtersModeAnd, \n    filters, \n    nodeColorVariable: newNodeColorVariable,\n    nodeSizeVariable,\n    nodeLabelVariable,\n    labelDensity,\n    colorPalette,\n}) => {\n    setCameraPosition({x, y, ratio});\n    setUpdateTimeStamp(new Date().getTime());\n    setSearchString(searchString);\n    setFiltersModeAnd(filtersModeAnd);\n    setFilters(filters);\n    setNodeColorVariable(newNodeColorVariable);\n    setNodeSizeVariable(nodeSizeVariable);\n    setNodeLabelVariable(nodeLabelVariable);\n    if (colorPalette && nodeColorVariable === newNodeColorVariable) {\n      setColorPalette(colorPalette);\n    } else {\n      const colors = generatePalette(newNodeColorVariable, filtersOptions[newNodeColorVariable].options.size);\n      const palette = {};\n      let i = 0;\n      filtersOptions[newNodeColorVariable].options.forEach(option => {\n        palette[option] = colors[i];\n        i++;\n      });\n      setColorPalette(palette);\n    }\n    setLabelDensity(labelDensity === undefined ? DEFAULT_LABEL_DENSITY : labelDensity);\n  }\n  const onSearchStringChange = str => {\n    setSearchString(str);\n  }\n  return (\n    <VisualizationControlContext.Provider value={{\n      onVisualizationUpdate, \n      onRegisterVisualization, \n      onUnregisterVisualization, \n      focusedVisualizationId,\n      setFocusedVisualizationId,\n      visualizationParams: {\n        ...cameraPosition,\n        searchString,\n        // filtersOptions,\n        filters,\n        // updateTimestamp,\n        nodeSizeVariable,\n        nodeColorVariable,\n        nodeLabelVariable,\n        filtersModeAnd,\n        labelDensity,\n        colorPalette,\n      }\n    }}>\n    <div className=\"slide-container\">\n      <section>\n        <div>\n          <p>\n            <button className={helpVisible ? 'is-active': ''} onClick={() => setHelpVisible(!helpVisible)}>\n              Comment modifier cette page ?\n            </button>\n          </p>\n          <ol className={`edit-help ${helpVisible ? 'is-active' : ''}`}>\n            <li>\n              Préalablement se logger dans github si le répertoire est privé\n            </li>\n            <li>\n              Se rendre sur <a target=\"blank\" href={contentsURL}>cette page du répertoire github</a>\n            </li>\n            <li>\n              Cliquer sur le crayon en haut à droite des contenus (il affiche \"edit\" au survol)\n            </li>\n            <li>\n              Faire les modifications puis cliquer sur \"Commit changes\" en bas de la page\n            </li>\n            <li>\n              Attendre 2 minutes puis recharger la page pour voir la version à jour de la page\n            </li>\n          </ol>\n        </div>\n        <Suspense fallback={<div>Chargement</div>}>\n          <Content />\n        </Suspense>\n        <FooterNav prevPage={prevPage} nextPage={nextPage} />\n      </section>\n      <aside>\n        <div className=\"vis\">\n          <GraphVis\n            {\n              ...{\n                graph,\n                // nodeColor,\n                // nodeSize,\n                // nodeLabel,\n                // labelDensity,\n                searchString,\n                filtersOptions,\n                filters,\n                cameraPosition,\n                onCameraUpdate,\n                updateTimestamp,\n                nodeSizeVariable,\n                nodeColorVariable,\n                nodeLabelVariable,\n                filtersModeAnd,\n                labelDensity,\n\n                colorPalette,\n\n                onSearchStringChange,\n                onToggleFiltersModeAnd: () => setFiltersModeAnd(!filtersModeAnd),\n\n                onFiltersChange: (newFilters) => setFilters(newFilters),\n\n                onLabelDensityChange: val => setLabelDensity(val),\n                onNodeSizeVariableChange: (val) => setNodeSizeVariable(val),\n                onNodeColorVariableChange: (val) => setNodeColorVariable(val),\n                onNodeLabelVariableChange: (val) => setNodeLabelVariable(val),\n                onColorPaletteChange: val => setColorPalette(val),\n\n                extents: {\n                  nodeSize: {\n                    min: sizeExtent[0],\n                    max: sizeExtent[1]\n                  }\n                }\n              }\n            }\n          />\n          \n        </div>\n        {/* <CodeContainer code={currentCode} /> */}\n      </aside>\n  </div>\n  </VisualizationControlContext.Provider>\n  )\n}\n\nexport default GraphAnnotation;","import React, {useState} from 'react';\nimport cx from 'classnames';\n\nimport VariablesEditor from '../VariablesEditor';\nimport ColorLegend from '../ColorLegend';\nimport FiltersEditor from '../FiltersEditor';\n\nexport default function IceCreamControls({\n  xVariable,\n  reverseX,\n\n  yVariable,\n  reverseY,\n\n  sizeVariable,\n  colorVariable,\n  labelVariable,\n  labelsOnTheSide,\n\n  onToggleFiltersModeAnd,\n  filtersModeAnd,\n  onFiltersChange,\n  filters,\n\n  rotateMode,\n  searchString,\n\n  onSearchStringChange,\n  onToggleRotateMode,\n  \n  onXVariableChange,\n  onYVariableChange,\n  onColorVariableChange,\n  onSizeVariableChange,\n  onLabelVariableChange,\n  onToggleLabelsOnTheSide,\n  onColorPaletteChange,\n\n  onToggleReverseX,\n  onToggleReverseY,\n  \n  filtersOptions,\n  colorPalette,\n}) {\n  const handleSearchChange = e => onSearchStringChange(e.target.value);\n  const [isMinified, setIsMinified] = useState(true)\n  return (\n    <>\n      <button onClick={() => setIsMinified(!isMinified)} className={cx('minify-button', {'is-active': !isMinified})}>\n        {'éditer'}\n      </button>\n      <ul className={cx(\"VisControls\", {'is-minified': isMinified})}>\n        \n        <li className=\"vis-controls-item\">\n        <form onSubmit={e => e.preventDefault()}>\n          <input type=\"text\" onChange={handleSearchChange} placeholder=\"rechercher\" value={searchString} />\n        </form>\n        </li>\n        <li className=\"vis-controls-item\">\n          <VariablesEditor\n            {\n              ...{\n                options: filtersOptions,\n                variables: [\n                  {\n                    title: 'X des points',\n                    onChange: onXVariableChange,\n                    value: xVariable,\n                    type: 'number'\n                  },\n                  {\n                    title: 'Inverser les x',\n                    onChange: onToggleReverseX,\n                    value: reverseX,\n                    type: 'boolean'\n                  },\n                  {\n                    title: 'Y des points',\n                    onChange: onYVariableChange,\n                    value: yVariable,\n                    type: 'number'\n                  },\n                  {\n                    title: 'Inverser les y',\n                    onChange: onToggleReverseY,\n                    value: reverseY,\n                    type: 'boolean'\n                  },\n                  {\n                    title: 'Taille des points',\n                    onChange: onSizeVariableChange,\n                    value: sizeVariable,\n                    type: 'number'\n                  },\n                  {\n                    title: 'Couleur des points',\n                    onChange: onColorVariableChange,\n                    value: colorVariable,\n                    type: 'color'\n                  },\n                  {\n                    title: 'Labels des points',\n                    onChange: onLabelVariableChange,\n                    value: labelVariable,\n                    type: 'string'\n                  },\n                  {\n                    title: 'Tourner la visualisation à 45°',\n                    onChange: onToggleRotateMode,\n                    value: rotateMode,\n                    type: 'boolean'\n                  },\n                  {\n                    title: 'Afficher les labels sur le côté',\n                    onChange: onToggleLabelsOnTheSide,\n                    value: labelsOnTheSide,\n                    type: 'boolean'\n                  },\n                  \n                ],\n              }\n            }\n          />\n        </li>\n        <li className=\"vis-controls-item\">\n          <FiltersEditor\n            {\n              ...{\n                onToggleFiltersModeAnd,\n                filtersModeAnd,\n                filtersOptions,\n                onFiltersChange,\n                filters\n              }\n            }\n          />\n        </li>\n        {\n            colorVariable && colorVariable !== 'default' ?\n            <ColorLegend\n              colorPalette={colorPalette}\n              onChange={onColorPaletteChange}\n            />\n            : null\n        }\n      </ul>\n    </>\n  );\n}","import React from 'react';\nimport ContainerDimensions from 'react-container-dimensions';\nimport {scaleLinear} from 'd3-scale';\nimport {min, extent} from 'd3-array';\nimport cx from 'classnames';\n\nimport IceCreamControls from './IceCreamControls';\nimport {generatePalette} from '../../helpers/palettes';\n\nimport './IceCreamContainer.css';\nimport { evalIfNodeMatches, transformGeometry } from '../../helpers/misc';\n\nfunction IceCreamContainer({\n\n  width, height,\n  data,\n\n  xVariable,\n  reverseX,\n  yVariable,\n  reverseY,\n  sizeVariable,\n  colorVariable,\n  labelVariable,\n  labelsOnTheSide = true,\n  colorPalette: inputColorPalette,\n\n  rotateMode,\n  searchString = '',\n\n  onSearchStringChange,\n  onToggleRotateMode,\n  filtersOptions = {},\n\n  onToggleFiltersModeAnd,\n  filtersModeAnd,\n  onFiltersChange,\n  filters,\n\n  \n  onXVariableChange,\n  onYVariableChange,\n  onColorVariableChange,\n  onSizeVariableChange,\n  onLabelVariableChange,\n  onToggleReverseX,\n  onToggleReverseY,\n  onToggleLabelsOnTheSide,\n  onColorPaletteChange,\n}) {\n \n  const smallestDimension = min([width, height])\n  // in rotate mode width indexed on the hypothenuse\n  const WIDTH = rotateMode ? parseInt(Math.sqrt(smallestDimension * smallestDimension / 2)) : smallestDimension;\n  const HEIGHT = rotateMode ? parseInt(Math.sqrt(smallestDimension * smallestDimension / 2)) : smallestDimension;\n\n  const MIN_AREA = smallestDimension / 50;\n  const MAX_AREA = smallestDimension / 2;\n  const MARGIN = WIDTH / 15;\n\n  let xRange = [MARGIN, WIDTH - MARGIN * 2];\n  let yRange = [MARGIN, HEIGHT - MARGIN * 2];\n  if (reverseX) {\n    xRange = xRange.reverse();\n  }\n  if (reverseY) {\n    yRange = yRange.reverse();\n  }\n\n  const getX = xVariable && xVariable !== 'default' ?  scaleLinear().range(xRange).domain([0, 1]) : () => 0;\n  const getY = yVariable && yVariable !== 'default' ?  scaleLinear().range(yRange).domain([0, 1]) : () => 0;\n  const getSize = sizeVariable && sizeVariable !== 'default' ?  scaleLinear().domain(extent(data.map(d => +d[sizeVariable]))).range([MIN_AREA, MAX_AREA]) : () => 0;\n\n  // manage palette\n  let colorPalette;\n  if (inputColorPalette) {\n    colorPalette = inputColorPalette;\n  }\n  else if (colorVariable && colorVariable !== 'default') {\n    const palette = generatePalette(colorVariable, filtersOptions[colorVariable].options.length);\n    colorPalette = filtersOptions[colorVariable].options.reduce((res, option, index) => ({\n      ...res,\n      [option]: palette[index]\n    }), {})\n  }\n  let getColor = (val) => colorPalette ? colorPalette[val] : 'grey';\n\n  // handling search\n  let highlightedIndex;\n  if (searchString.length && labelVariable) {\n    highlightedIndex = new Set();\n    data.forEach((datum, index) => {\n      const label = datum[labelVariable].toLowerCase();\n      if (label.includes(searchString)) {\n        highlightedIndex.add(index);\n      }\n    })\n  }\n  let rotateTransform = {rotate: 0};\n  if (rotateMode) {\n    rotateTransform = {\n      rotate: -45,\n      translate: {x: 0, y: smallestDimension/2}\n    }\n  }\n  // wrapping function for transforms\n  const transf = (x, y) => transformGeometry({x, y}, rotateTransform)\n  // dimensions of control background rect\n  const {x: point1X, y: point1Y} = transformGeometry({\n    x: 0,\n    y: 0\n  }, rotateTransform)\n  const {x: point2X, y: point2Y} = transformGeometry({\n    x: WIDTH,\n    y: 0\n  }, rotateTransform)\n  const {x: point3X, y: point3Y} = transformGeometry({\n    x: WIDTH,\n    y: HEIGHT\n  }, rotateTransform)\n  const {x: point4X, y: point4Y} = transformGeometry({\n    x: 0,\n    y: HEIGHT\n  }, rotateTransform)\n  \n  return (\n    <>\n        <svg \n          className=\"scatterplot\" \n          width={smallestDimension} \n          height={smallestDimension}\n          transform={`translate(${(width - smallestDimension) / 2}, 0)`}\n        >\n          <polygon \n            points={`${point1X},${point1Y} ${point2X},${point2Y} ${point3X},${point3Y} ${point4X},${point4Y}`} \n            width={WIDTH} \n            height={HEIGHT} \n            fill=\"white\" \n          />\n          <g transform={`translate(${rotateMode ? 0 : MARGIN / 2}, ${rotateMode ? -MARGIN : 0})${rotateMode ? 'scale(1.05)' : ''}`}>\n            <g className=\"axis axis-left\">\n              <line \n                x1={transf(MARGIN, MARGIN).x}\n                y1={transf(MARGIN, MARGIN).y}\n                x2={transf(MARGIN, HEIGHT - MARGIN * 2).x}\n                y2={transf(MARGIN, HEIGHT - MARGIN * 2).y}\n                stroke={'black'} \n              />\n              {\n                getY.ticks &&\n                getY.ticks()\n                .map(tick => {\n   \n                  const {x, y} = transf(MARGIN, getY(tick))\n                  const {x: x1, y: y1} = transf(MARGIN/4, getY(tick) + MARGIN/6)\n                  const {x: x2, y: y2} = transf(MARGIN/2, getY(tick))\n                  return (\n                    <g key={tick}>\n                      <text textAnchor=\"end\" x={x1} y={y1}>\n                        {tick}\n                      </text>\n                      <line\n                        x1={x}\n                        y1={y}\n                        x2={x2}\n                        y2={y2}\n                        stroke={'black'}\n                      />\n                    </g>\n                  )\n                })\n              }\n              <g\n                transform={rotateMode ? `translate(${WIDTH/2 - MARGIN * 1.5}, ${HEIGHT + MARGIN * 2.5})rotate(45)` : `translate(0, ${MARGIN / 2 - 2})`}\n              >\n                <text \n                  className=\"axis-variable-name\" \n                  textAnchor={rotateMode ? 'end' : 'start'}\n                >\n                  {yVariable}\n                </text>\n              </g>\n            </g>\n            <g className=\"axis axis-bottom\">\n              <line \n                x1={transf(MARGIN, HEIGHT - MARGIN * 2).x} \n                y1={transf(MARGIN, HEIGHT - MARGIN * 2).y} \n                x2={transf(WIDTH - MARGIN * 2, HEIGHT - MARGIN * 2).x} \n                y2={transf(WIDTH - MARGIN * 2, HEIGHT - MARGIN * 2).y} \n                stroke={'black'} \n              />\n              {\n                getX.ticks &&\n                getX.ticks()\n                .map(tick => {\n                  const {x, y} = transf(getX(tick), HEIGHT - MARGIN * 2);\n                  const {x: x1, y: y1} = transf(getX(tick), HEIGHT - MARGIN * 1.66);\n                  const {x: x2, y: y2} = transf(getX(tick), HEIGHT - MARGIN * 1.25);\n                  return (\n                    <g key={tick}>\n                      <text textAnchor=\"center\" x={x2} y={y2}>\n                        {tick}\n                      </text>\n                      <line\n                        x1={x}\n                        y1={y}\n                        x2={x1}\n                        y2={y1}\n                        stroke={'black'}\n                      />\n                    </g>\n                  )\n                })\n              }\n              <g\n                transform={rotateMode ? `translate(${WIDTH}, ${HEIGHT + MARGIN * 1.5})rotate(-45)` : `translate(${WIDTH - MARGIN * 1.5}, ${HEIGHT - MARGIN / 3 - 2})`}\n              >\n                <text \n                  className=\"axis-variable-name\" \n                  textAnchor={rotateMode ? 'end' : 'start'}\n                >\n                  {xVariable}\n                </text>\n              </g>\n            </g>\n            <g className={\"ticks-container\"}>\n              {\n                \n                  getY.ticks &&\n                  getY.ticks()\n                  .map(tick => (\n                    <line \n                      key={tick}\n                      x1={transf(MARGIN, getY(tick)).x}\n                      y1={transf(MARGIN, getY(tick)).y}\n                      x2={transf(WIDTH - MARGIN * 2, getY(tick)).x}\n                      y2={transf(WIDTH - MARGIN * 2, getY(tick)).y}\n                      stroke=\"lightgrey\"\n                    />\n                  ))\n              }\n              {\n                \n                getX.ticks &&\n                getX.ticks()\n                .map(tick => (\n                  <line \n                    key={tick}\n                    x1={transf(getX(tick), MARGIN).x}\n                    y1={transf(getX(tick), MARGIN).y}\n                    x2={transf(getX(tick), WIDTH - MARGIN * 2).x}\n                    y2={transf(getX(tick), WIDTH - MARGIN * 2).y}\n                    stroke=\"lightgrey\"\n                  />\n                ))\n            }\n            </g>\n            <g className=\"plot-objects-container\">\n            {\n              data\n              .sort((a, b) => {\n                if (getY(a[yVariable]) > getY(b[yVariable])) {\n                  return 1;\n                }\n                return -1;\n              })\n              .map((datum, index) => {\n                const radius = Math.sqrt(getSize(datum[sizeVariable]) / Math.PI);\n                let {x, y} = transf(getX(datum[xVariable]), getY(datum[yVariable]));\n\n                let {x: xForXAxis, y: yForXAxis} = transf(getX(datum[xVariable]), getY.range ? getY.range()[0] : 0);\n                let {x: xForYAxis, y: yForYAxis} = transf(getX.range ? getX.range()[0] : 0, getY(datum[yVariable]));\n                let labelX =  x + radius + smallestDimension / 100;\n                let labelY = rotateMode ? y - smallestDimension / 200 : y + smallestDimension / 200;\n                let pointerStartCoords = transf(getX(datum[xVariable]) + radius, getY(datum[yVariable]));\n                if (labelsOnTheSide) {\n                  let {x: newX, y: newY} = transf( WIDTH - MARGIN * 1.7, MARGIN + index * (HEIGHT - MARGIN * 3) / data.length);\n                  labelX = newX;\n                  labelY = newY;\n                }\n\n                let opacity =  1;\n                const isMatching = !filters.length || evalIfNodeMatches(datum, filters, filtersModeAnd);\n                if (filters.length) {\n                  if (isMatching && (!highlightedIndex || highlightedIndex.has(index))) {\n                    opacity = 1;\n                  } else {\n                    opacity = .05;\n                  }\n                } else if (highlightedIndex && !highlightedIndex.has(index)) {\n                  opacity = .2;\n                }\n           \n                return (\n                  <g \n                    key={index} \n                    className={cx(\"plot-object\", {'is-matching': isMatching})}\n                    opacity={opacity}\n                  >\n                    <line\n                      className=\"axis-line\"\n                      stroke=\"lightgrey\"\n                      strokeDasharray='2,2'\n                      x1={x}\n                      y1={y}\n                      x2={xForYAxis}\n                      y2={yForYAxis}\n                    />\n                    <line\n                      className=\"axis-line\"\n                      stroke=\"lightgrey\"\n                      strokeDasharray='2,2'\n                      x1={x}\n                      y1={y}\n                      x2={xForXAxis}\n                      y2={yForXAxis}\n                    />\n                    <circle \n                      cx={x}\n                      cy={y}\n                      r={radius} \n                      fill={getColor(datum[colorVariable])} \n                      opacity={.8}\n                    />\n                    {\n                      labelsOnTheSide ?\n                      <line\n                        x1={pointerStartCoords.x}\n                        y1={pointerStartCoords.y}\n                        x2={labelX}\n                        y2={labelY}\n                        stroke=\"lightgrey\"\n                        strokeDasharray='4,4'\n                      />\n                      : null\n                    }\n                    <g \n                      transform={`translate(${labelX}, ${labelY})`}\n                    >\n                      <text\n                        transform={rotateMode ? 'rotate(-45)': ''}\n                        style={{\n                          fontSize: rotateMode && labelsOnTheSide ? HEIGHT / 70 : undefined\n                        }}\n                      >\n                        {datum[labelVariable]}\n                      </text>\n                    </g>\n                  </g>\n                )\n              })\n            }\n            </g>\n          </g>\n        </svg>\n        <IceCreamControls\n          {\n            ...{\n              xVariable,\n              yVariable,\n              reverseX,\n              reverseY,\n              sizeVariable,\n              colorVariable,\n              labelVariable,\n              labelsOnTheSide,\n\n              rotateMode,\n              searchString,\n\n              onSearchStringChange,\n              onToggleRotateMode,\n              \n              onXVariableChange,\n              onYVariableChange,\n              onColorVariableChange,\n              onSizeVariableChange,\n              onLabelVariableChange,\n              onToggleLabelsOnTheSide,\n              onToggleReverseX,\n              onToggleReverseY,\n              onColorPaletteChange,\n\n              onToggleFiltersModeAnd,\n              filtersModeAnd,\n              onFiltersChange,\n              filters,\n\n              filtersOptions,\n              colorPalette,\n            }\n          }\n        />\n    </>\n  );\n}\n\nexport default function IceCreamContainerWithDimensions(props) {\n  return (\n    <div className=\"VisContainer IcecreamContainer\">\n\n    <ContainerDimensions>\n      {\n        dimensions => <IceCreamContainer {...{...props, ...dimensions}} />\n      }\n    </ContainerDimensions>\n    </div>\n  )\n}","import React, { useState, useEffect, useMemo, Suspense } from 'react';\nimport FooterNav from '../FooterNav';\nimport { generatePalette } from '../../helpers/palettes';\n\nimport IceCreamVis from './IceCreamContainer';\n\nimport { VisualizationControlContext } from '../../contexts';\n\nimport { computeFiltersOptions } from '../../helpers/misc';\n\nconst IceCreamAnnotation = ({\n  Content,\n  data,\n  contentsURL,\n  prevPage,\n  nextPage,\n}) => {\n  const filtersOptions = useMemo(() => computeFiltersOptions('table', data), [data]);\n  const [helpVisible, setHelpVisible] = useState(false);\n  const [searchString, setSearchString] = useState('');\n\n  const [xVariable, setXVariable] = useState(undefined);\n  const [yVariable, setYVariable] = useState(undefined);\n  const [reverseX, setReverseX] = useState(false);\n  const [reverseY, setReverseY] = useState(false);\n  const [sizeVariable, setSizeVariable] = useState(undefined);\n  const [colorVariable, setColorVariable] = useState(undefined);\n  const [labelVariable, setLabelVariable] = useState(undefined);\n  const [labelsOnTheSide, setLabelsOnTheSide] = useState(false);\n  const [colorPalette, setColorPalette] = useState(undefined);\n  const [filtersModeAnd, setFiltersModeAnd] = useState(false);\n  const [filters, setFilters] = useState([]);\n\n\n  const [rotateMode, setRotateMode] = useState(false);\n\n  const [focusedVisualizationId, setFocusedVisualizationId] = useState(null);\n  const [registeredVisualizations, setRegisteredVisualizations] = useState({});\n\n  const onRegisterVisualization = (id, props) => {\n    setRegisteredVisualizations({\n      ...registeredVisualizations,\n      [id]: props\n    })\n  }\n\n  const onUnregisterVisualization = id => {\n    const copyOfRegistered = { ...registeredVisualizations };\n    delete copyOfRegistered[id]\n    setRegisteredVisualizations(copyOfRegistered)\n  }\n\n  const onVisualizationUpdate = ({\n    xVariable: thatXVariable,\n    yVariable: thatYVariable,\n\n    reverseX: thatReverseX,\n    reverseY: thatReverseY,\n\n    sizeVariable: thatSizeVariable,\n    colorVariable: thatColorVariable,\n    labelVariable: thatLabelVariable,\n    labelsOnTheSide: thatLabelsOnTheSide,\n\n    rotateMode: thatRotateMode,\n    searchString: thatSearchString,\n    colorPalette: thatColorPalette,\n    filters: theseFilters = [],\n    filtersModeAnd: theseFiltersModeAnd,\n  }) => {\n    setXVariable(thatXVariable);\n    setYVariable(thatYVariable);\n    setReverseX(thatReverseX);\n    setReverseY(thatReverseY);\n    setSizeVariable(thatSizeVariable);\n    setColorVariable(thatColorVariable);\n    setLabelVariable(thatLabelVariable);\n    setRotateMode(thatRotateMode);\n    setSearchString(thatSearchString);\n    setLabelsOnTheSide(thatLabelsOnTheSide);\n    setFilters(theseFilters);\n    setFiltersModeAnd(theseFiltersModeAnd);\n\n    if (thatColorPalette && colorVariable === thatColorVariable) {\n      setColorPalette(thatColorPalette);\n    } else if (thatColorVariable) {\n      let palette = colorVariable && colorVariable !== 'default' ? generatePalette(colorVariable, filtersOptions[colorVariable].options.length) : undefined\n      const colors = generatePalette(thatColorVariable, filtersOptions[thatColorVariable].options.size);\n      // const palette = {};\n      let i = 0;\n      filtersOptions[thatColorVariable].options.forEach(option => {\n        palette[option] = colors[i];\n        i++;\n      });\n      setColorPalette(palette);\n    } else if (colorPalette) {\n      setColorPalette(undefined);\n    }\n  }\n\n  useEffect(() => {\n    if (!focusedVisualizationId && Object.keys(registeredVisualizations).length) {\n      const thatId = Object.keys(registeredVisualizations)[0];\n      setFocusedVisualizationId(thatId)\n      onVisualizationUpdate(registeredVisualizations[thatId])\n    }\n  }, [registeredVisualizations, focusedVisualizationId])/* eslint react-hooks/exhaustive-deps : 0 */\n\n\n  const onSearchStringChange = str => {\n    setSearchString(str);\n  }\n  return (\n    <VisualizationControlContext.Provider value={{\n      onVisualizationUpdate,\n      onRegisterVisualization,\n      onUnregisterVisualization,\n      focusedVisualizationId,\n      setFocusedVisualizationId,\n      visualizationParams: {\n        xVariable,\n        yVariable,\n\n        reverseX,\n        reverseY,\n\n        sizeVariable,\n        colorVariable,\n        labelVariable,\n        labelsOnTheSide,\n\n        rotateMode,\n        searchString,\n        colorPalette,\n\n        filters,\n        filtersModeAnd,\n      }\n    }}>\n      <div className=\"slide-container\">\n        <section>\n          <div>\n            <p>\n              <button className={helpVisible ? 'is-active' : ''} onClick={() => setHelpVisible(!helpVisible)}>\n                Comment modifier cette page ?\n            </button>\n            </p>\n            <ol className={`edit-help ${helpVisible ? 'is-active' : ''}`}>\n              <li>\n                Préalablement se logger dans github si le répertoire est privé\n            </li>\n              <li>\n                Se rendre sur <a target=\"blank\" href={contentsURL}>cette page du répertoire github</a>\n              </li>\n              <li>\n                Cliquer sur le crayon en haut à droite des contenus (il affiche \"edit\" au survol)\n            </li>\n              <li>\n                Faire les modifications puis cliquer sur \"Commit changes\" en bas de la page\n            </li>\n              <li>\n                Attendre 2 minutes puis recharger la page pour voir la version à jour de la page\n            </li>\n            </ol>\n          </div>\n          <Suspense fallback={<div>Chargement</div>}>\n            <Content />\n          </Suspense>\n          <FooterNav prevPage={prevPage} nextPage={nextPage} />\n        </section>\n        <aside>\n          <div className=\"vis\">\n            <IceCreamVis\n              {\n              ...{\n                data,\n                filtersOptions,\n\n                xVariable,\n                reverseX,\n                yVariable,\n                reverseY,\n                sizeVariable,\n                colorVariable,\n                labelVariable,\n                labelsOnTheSide,\n                colorPalette,\n\n                rotateMode,\n                searchString,\n\n                filtersModeAnd,\n                filters,\n\n                onToggleFiltersModeAnd: () => setFiltersModeAnd(!filtersModeAnd),\n                onFiltersChange: (newFilters) => setFilters(newFilters),\n\n                onSearchStringChange,\n                onToggleRotateMode: () => setRotateMode(!rotateMode),\n\n                onXVariableChange: (val) => setXVariable(val),\n                onYVariableChange: (val) => setYVariable(val),\n\n                onToggleReverseX: () => setReverseX(!reverseX),\n                onToggleReverseY: () => setReverseY(!reverseY),\n\n                onColorVariableChange: (val) => setColorVariable(val),\n                onSizeVariableChange: (val) => setSizeVariable(val),\n                onLabelVariableChange: (val) => setLabelVariable(val),\n                onToggleLabelsOnTheSide: val => setLabelsOnTheSide(val),\n                onColorPaletteChange: val => setColorPalette(val)\n              }\n              }\n            />\n          </div>\n        </aside>\n      </div>\n    </VisualizationControlContext.Provider>\n  )\n}\n\nexport default IceCreamAnnotation;","import IceCreamAnnotation from './IceCreamAnnotation';\n\nexport default IceCreamAnnotation;","import React, {useState} from 'react';\nimport cx from 'classnames';\n\nimport VariablesEditor from '../VariablesEditor';\nimport ColorLegend from '../ColorLegend';\nimport FiltersEditor from '../FiltersEditor';\n\n\n\nexport default function LinearGraphControls({\n  xVariable,\n  xLabelVariable,\n  // reverseX,\n  graphType,\n  yVariable,\n  // reverseY,\n\n  colorVariable,\n  // searchString,\n  useRelativeScale,\n\n  onToggleFiltersModeAnd,\n  filtersModeAnd,\n  onFiltersChange,\n  filters,\n\n  // onSearchStringChange,\n  onToggleUseRelativeScale,\n  onGraphTypeChange,\n  \n  onXVariableChange,\n  onXLabelVariableChange,\n  onYVariableChange,\n  onColorVariableChange,\n\n  onColorPaletteChange,\n\n  // onToggleReverseX,\n  // onToggleReverseY,\n  \n  filtersOptions,\n  colorPalette,\n}) {\n  // const handleSearchChange = e => onSearchStringChange(e.target.value);\n  const [isMinified, setIsMinified] = useState(true)\n  return (\n    <>\n      <button onClick={() => setIsMinified(!isMinified)} className={cx('minify-button', {'is-active': !isMinified})}>\n        {'éditer'}\n      </button>\n      <ul className={cx(\"VisControls\", {'is-minified': isMinified})}>\n        \n        {/* <li className=\"vis-controls-item\">\n        <form onSubmit={e => e.preventDefault()}>\n          <input type=\"text\" onChange={handleSearchChange} placeholder=\"rechercher\" value={searchString} />\n        </form>\n        </li> */}\n        <li className=\"vis-controls-item\">\n          <VariablesEditor\n            {\n              ...{\n                options: filtersOptions,\n                variables: [\n                  {\n                    title: 'Type de graphe',\n                    onChange: onGraphTypeChange,\n                    localOptions: [[\n                      'linegraph',\n                      {title: 'lignes'}\n                    ], [\n                      'histogram',\n                      {title: 'histogramme'}\n                    ]],\n                    value: graphType,\n                    type: 'string'\n                  },\n                  {\n                    title: 'Variable des X',\n                    onChange: onXVariableChange,\n                    value: xVariable,\n                    type: 'number'\n                  },\n                  {\n                    title: 'Label des X',\n                    onChange: onXLabelVariableChange,\n                    value: xLabelVariable,\n                    type: 'string'\n                  },\n                  // {\n                  //   title: 'Inverser les x',\n                  //   onChange: onToggleReverseX,\n                  //   value: reverseX,\n                  //   type: 'boolean'\n                  // },\n                  {\n                    title: 'Label des Y',\n                    onChange: onYVariableChange,\n                    value: yVariable,\n                    type: 'number'\n                  },\n                  // {\n                  //   title: 'Inverser les y',\n                  //   onChange: onToggleReverseY,\n                  //   value: reverseY,\n                  //   type: 'boolean'\n                  // },\n                  {\n                    title: 'Utiliser une échelle relative pour les Y quand filtré',\n                    onChange: onToggleUseRelativeScale,\n                    value: useRelativeScale,\n                    type: 'boolean'\n                  },\n                  {\n                    title: 'Couleur des points',\n                    onChange: onColorVariableChange,\n                    value: colorVariable,\n                    type: 'color'\n                  },\n                  // {\n                  //   title: 'Labels des points',\n                  //   onChange: onLabelVariableChange,\n                  //   value: labelVariable,\n                  //   type: 'string'\n                  // },\n                ],\n              }\n            }\n          />\n        </li>\n        <li className=\"vis-controls-item\">\n          <FiltersEditor\n            {\n              ...{\n                onToggleFiltersModeAnd,\n                filtersModeAnd,\n                filtersOptions,\n                onFiltersChange,\n                filters\n              }\n            }\n          />\n        </li>\n        {\n            colorVariable && colorVariable !== 'default' ?\n            <ColorLegend\n              colorPalette={colorPalette}\n              onChange={onColorPaletteChange}\n            />\n            : null\n        }\n      </ul>\n    </>\n  );\n}","import React, {useMemo} from 'react';\nimport ContainerDimensions from 'react-container-dimensions';\nimport {scaleLinear} from 'd3-scale';\nimport {extent, group} from 'd3-array';\n\n\n\nimport LinearGraphControls from './LinearGraphControls';\nimport {generatePalette} from '../../helpers/palettes';\nimport {evalIfNodeMatches} from '../../helpers/misc';\n\nimport './LinearGraphContainer.css';\nimport { max, uniqBy } from 'lodash';\n\nfunction LinearGraphContainer({\n\n  width, \n  height,\n  data,\n\n  xVariable,\n  xLabelVariable,\n  reverseX,\n  yVariable,\n  reverseY,\n  sizeVariable,\n  colorVariable,\n  labelVariable,\n  colorPalette: inputColorPalette,\n\n  searchString = '',\n\n  graphType = 'linegraph',\n  useRelativeScale,\n\n  onSearchStringChange,\n  filtersOptions = {},\n\n  onToggleFiltersModeAnd,\n  filtersModeAnd,\n  onFiltersChange,\n  filters,\n\n  \n  onXVariableChange,\n  onXLabelVariableChange,\n  onYVariableChange,\n  onColorVariableChange,\n  onSizeVariableChange,\n  onLabelVariableChange,\n  onToggleReverseX,\n  onToggleReverseY,\n  onColorPaletteChange,\n  onGraphTypeChange,\n  onToggleUseRelativeScale,\n}) {\n \n  // const smallestDimension = min([width, height])\n  const WIDTH = width;\n  const HEIGHT = height;\n\n  // set scales dimensions and scale\n  const MARGIN = WIDTH / 10;\n\n  let xRange = [MARGIN, WIDTH - MARGIN / 2];\n  let yRange = [HEIGHT - MARGIN, MARGIN];\n\n  const xLabelMap = useMemo(() => {\n    return data.reduce((dict, datum) => {\n      const labelVariable = xLabelVariable === 'default' ? xVariable : xLabelVariable;\n      return {\n        ...dict,\n        [datum[xVariable]]: datum[labelVariable]\n      }\n    }, {})\n\n  }, [data, xVariable, xLabelVariable])\n  \n  // build visualization groups\n  let dataGroups = [[undefined, data]]\n  if (colorVariable) {\n    dataGroups = Array.from(group(data, d => d[colorVariable]));\n  } \n\n  // reduce items\n  dataGroups = dataGroups.map(([_id, values]) => {\n    const xGroups = Array.from(group(values, d => d[xVariable])).map(([x, ys]) => {\n      return {\n        x: +x, \n        // aggregate ys\n        y: ys.reduce((sum, y) => sum + (+y[yVariable]), 0),\n        filteredY: ys.filter(d => filters.length ? evalIfNodeMatches(d, filters, filtersModeAnd) : true).reduce((sum, y) => sum + (+y[yVariable]), 0),\n        xValue: x\n      }\n    })\n    return [_id, xGroups]\n  })\n \n  // refactorize by x for stacked barchart\n  if (graphType === 'histogram') {\n    const xMap = dataGroups.reduce((res, [color, values]) => {\n      return values.reduce((res2, value) => {\n        const x = value.x;\n        const transformedValue = {...value, color};\n        return {\n          ...res2,\n          [x]: res2[x] ? [...res2[x], transformedValue] : [transformedValue]\n        }\n      }, res)\n    }, {})\n    // turn datagroup to an array of [x, list of related objects]\n    dataGroups = Object.entries(xMap);\n  }\n  let getX, getY;\n  const yPropToFilter = useRelativeScale ? 'filteredY' : 'y';\n  let xValues;\n  if (graphType === 'linegraph') {\n    // handling relative or global filter\n    const xExtent = extent(dataGroups.reduce((res, [_id, values]) => [...res, ...values.map(v => v.x)] , []));\n    getX = scaleLinear().range(xRange).domain(xExtent);\n    getY = scaleLinear().range(yRange).domain([0, max(dataGroups.map(([_id, values]) => max(values.map(v => v[yPropToFilter]))))]).nice();\n  } else if (graphType === 'histogram') {\n    const xExtent = extent(dataGroups.map(([x]) => +x));\n    getX = scaleLinear().range(xRange).domain(xExtent);\n    xValues = uniqBy(dataGroups, d => d[0])\n    // y scale domain is the biggest sum for each x modality\n    getY = scaleLinear().range(yRange).domain([0, max(dataGroups.map(([_x, list]) => list.reduce((sum, item) => sum + item[yPropToFilter] , 0)))]).nice();\n  }\n\n   // apply filter\n   if (filters.length && colorVariable) {\n    const filtersAffectingColor = filters.filter(f => f.attribute === colorVariable);\n    if (graphType === 'linegraph') {\n      dataGroups = dataGroups.filter(([colorValue, values]) => {\n        if (filtersAffectingColor) {\n          if (filtersModeAnd) {\n            const oneFilterDoesNotMatches = filtersAffectingColor.find(({ attribute, value }) => colorValue !== '' + value) !== undefined;\n            return !oneFilterDoesNotMatches;\n          } else {\n            const oneFilterMatches = filtersAffectingColor.find(({ attribute, value }) => colorValue === '' + value) !== undefined;\n            return oneFilterMatches;\n          }\n        } else {\n          return true;\n        }\n      })\n     } else if (graphType === 'histogram') {\n       // filtering groups\n      dataGroups = dataGroups.reduce((res, [xValue, values]) => {\n        if (filtersAffectingColor) {\n          const newValues = values.filter(value => {\n            if (filtersModeAnd) {\n              const oneFilterDoesNotMatches = filtersAffectingColor.find(({ attribute, value }) => value.color !== '' + value) !== undefined;\n              return !oneFilterDoesNotMatches;\n            } else {\n              const oneFilterMatches = filtersAffectingColor.find(({ attribute, value }) => value.color === '' + value) !== undefined;\n              return oneFilterMatches;\n            }\n          })\n          if (newValues.length) {\n            return [...res, [xValue, newValues]]\n          // all items filtered out -> do not include the group\n          } else return res;\n        // no filters, return as is\n        } else {\n          return [...res, [xValue, values]];\n        }\n      }, [])\n     }\n    \n  }\n    \n  \n  // manage palette\n  let colorPalette;\n  if (inputColorPalette) {\n    colorPalette = inputColorPalette;\n  }\n  else if (colorVariable && colorVariable !== 'default') {\n    const palette = generatePalette(colorVariable, filtersOptions[colorVariable].options.length);\n    colorPalette = filtersOptions[colorVariable].options.reduce((res, option, index) => ({\n      ...res,\n      [option]: palette[index]\n    }), {})\n  }\n  let getColor = (val) => {\n    return colorPalette ? colorPalette[val] : 'grey';\n  }\n\n  // handling search\n  let highlightedIndex;\n  if (searchString.length && labelVariable) {\n    highlightedIndex = new Set();\n    data.forEach((datum, index) => {\n      const label = datum[labelVariable].toLowerCase();\n      if (label.includes(searchString)) {\n        highlightedIndex.add(index);\n      }\n    })\n  }\n\n  if (reverseX) {\n    xRange = xRange.reverse();\n  }\n  if (reverseY) {\n    yRange = yRange.reverse();\n  }\n  let getYHisto\n  // preparing histogram stacking\n  if (graphType === 'histogram') {\n    dataGroups = dataGroups.map(([xValue, values]) => {\n      // let sum = 0;\n      const newValues = values\n      .sort((a, b) => {\n        if (a.color > b.color) {\n          return 1;\n        } else return -1;\n      })\n      .reduce((total, value, index) => {\n        const prev = index > 0 ? total[index - 1] : undefined;\n        const yDisplace = prev ? +prev.y + (prev.yDisplace || 0) : 0;\n\n        const newValue = {\n          ...value,\n          yDisplace,\n          y: +value.y,\n          x: +value.x\n        }\n        return [...total, newValue]\n      }, [])\n\n      return [xValue, newValues];\n    }, []);\n\n    dataGroups = dataGroups.sort((a, b) => {\n      if (+a[0] > +b[0]) {\n        return 1;\n      }\n      return -1;\n    });\n    getYHisto = scaleLinear()\n    .range([MARGIN, HEIGHT - MARGIN * 2])\n    .domain([0, max(dataGroups.map(([_xValue, values]) => values.reduce((sum, v) => sum + v.y, 0)))]).nice()\n    getY\n    .domain([0, max(dataGroups.map(([_xValue, values]) => values.reduce((sum, v) => sum + v.y, 0)))]).nice()\n  }\n  \n  \n  return (\n    <>\n        <svg className=\"linear-graph\" width={WIDTH} height={HEIGHT}>\n            <g>\n              {\n                graphType === 'linegraph' ?\n                dataGroups.map(([colorValue, values]) => {\n                  const firstX = getX(values[0].x);\n                  const firstY = getY(values[0].y);\n                  const color = colorVariable ? getColor(colorValue) : 'grey';\n                  const path = `M ${firstX} ${firstY} ${\n                    values\n                    .reduce((res, {x, y}) => {\n                      return `${res} L ${getX(x)} ${getY(y)}`\n                    }, '')\n                  }`\n                  return <>\n                    <path d={path} \n                      fill=\"transparent\" \n                      stroke={ colorVariable ? color : 'grey'}\n                      key={colorValue}\n                    />\n                    {\n                      values.map(({x, y}, index) => (\n                        <circle\n                          key={index}\n                          cx={getX(x)}\n                          cy={getY(y)}\n                          fill={ color }\n                          r={2}\n                        />\n                      ))\n                    }\n                  </>\n                })\n                : \n                <g className=\"histogram-objects\">\n                  {\n                    dataGroups.map(([xValue, values], index) => {\n                      return (\n                        <g key={index} className=\"x-group\">\n                          {\n                            values.map(({x, y, yDisplace, color}, index2) => {\n                             \n                              return (\n                                <rect\n                                  key={index2}\n                                  x={getX(x)}\n                                  y={HEIGHT - getYHisto(yDisplace) - getYHisto(y)}\n                                  width={ (WIDTH - MARGIN * 4) / xValues.length}\n                                  height={getYHisto(y)}\n                                  fill={getColor(color)}\n                                />\n                              )\n                            })\n                          }\n                        </g>\n                      )\n                     \n                    })\n                  }\n                </g>\n              }\n              <g className=\"left-axis\">\n              {\n                getY.ticks &&\n                getY.ticks()\n                .map(tick => {\n                  const x = MARGIN / 2;\n                  return (\n                    <g key={tick}>\n                      <text textAnchor=\"end\" x={x} y={getY(tick)}>\n                        {tick}\n                      </text>\n                      \n                      <line\n                        x1={x  + MARGIN / 4}\n                        y1={getY(tick)}\n                        x2={MARGIN}\n                        y2={getY(tick)}\n                        stroke={'black'}\n                      />\n                    </g>\n                  )\n                })\n              }\n                <line\n                  stroke={'black'}\n                  y1={MARGIN}\n                  y2={HEIGHT - MARGIN}\n                  x1={MARGIN}\n                  x2={MARGIN}\n                />\n              </g>\n              <g className=\"bottom-axis\">\n                <line\n                  stroke={'black'}\n                  y1={HEIGHT - MARGIN}\n                  y2={HEIGHT - MARGIN}\n                  x1={MARGIN}\n                  x2={WIDTH - MARGIN / 2}\n                />\n                {\n                getX.ticks &&\n                getX.ticks()\n                .map(tick => {\n                  const y = HEIGHT - MARGIN * .75\n                  return (\n                    <g key={tick}>\n                      <g transform={`translate(${getX(tick)} ${y})`}>\n                        <g transform={'rotate(-45)'}>\n                          <text \n                            textAnchor=\"end\"\n                          >\n                            {xLabelMap[tick]}\n                          </text>\n                        </g>\n                      </g>\n                      <line\n                        y1={HEIGHT - MARGIN}\n                        y2={y - MARGIN * .1}\n                        x1={getX(tick)}\n                        x2={getX(tick)}\n                        stroke={'black'}\n                      />\n                    </g>\n                  )\n                })\n                }\n              </g>\n            </g>\n        </svg>\n        <LinearGraphControls\n          {\n            ...{\n              xVariable,\n              xLabelVariable,\n              yVariable,\n              reverseX,\n              reverseY,\n              sizeVariable,\n              colorVariable,\n              labelVariable,\n              graphType,\n              useRelativeScale,\n\n              searchString,\n\n              onSearchStringChange,\n              \n              onXVariableChange,\n              onXLabelVariableChange,\n              onYVariableChange,\n              onColorVariableChange,\n              onSizeVariableChange,\n              onLabelVariableChange,\n              onToggleReverseX,\n              onToggleReverseY,\n              onColorPaletteChange,\n              onToggleUseRelativeScale,\n              onGraphTypeChange,\n\n              onToggleFiltersModeAnd,\n              filtersModeAnd,\n              onFiltersChange,\n              filters,\n\n              filtersOptions,\n              colorPalette,\n            }\n          }\n        />\n    </>\n  );\n}\n\nexport default function LinearGraphContainerWithDimensions(props) {\n  return (\n    <div className=\"VisContainer LinearGraphContainer\">\n\n    <ContainerDimensions>\n      {\n        dimensions => <LinearGraphContainer {...{...props, ...dimensions}} />\n      }\n    </ContainerDimensions>\n    </div>\n  )\n}","import React, { useState, useEffect, useMemo, Suspense } from 'react';\nimport FooterNav from '../FooterNav';\nimport { generatePalette } from '../../helpers/palettes';\n\nimport LinearGraphVis from './LinearGraphContainer';\n\nimport { VisualizationControlContext } from '../../contexts';\n\nimport { computeFiltersOptions } from '../../helpers/misc';\n\nconst LinearGraphAnnotation = ({\n  Content,\n  data,\n  contentsURL,\n  prevPage,\n  nextPage,\n}) => {\n  const filtersOptions = useMemo(() => computeFiltersOptions('table', data), [data]);\n  const [helpVisible, setHelpVisible] = useState(false);\n  const [searchString, setSearchString] = useState('');\n\n  const [xVariable, setXVariable] = useState(undefined);\n  const [xLabelVariable, setXLabelVariable] = useState(undefined);\n  const [yVariable, setYVariable] = useState(undefined);\n  const [reverseX, setReverseX] = useState(false);\n  const [reverseY, setReverseY] = useState(false);\n  const [sizeVariable, setSizeVariable] = useState(undefined);\n  const [colorVariable, setColorVariable] = useState(undefined);\n  const [labelVariable, setLabelVariable] = useState(undefined);\n  const [colorPalette, setColorPalette] = useState(undefined);\n  const [graphType, setGraphType] = useState('linegraph');\n  const [useRelativeScale, setUseRelativeScale] = useState(undefined);\n  const [filtersModeAnd, setFiltersModeAnd] = useState(false);\n  const [filters, setFilters] = useState([]);\n\n\n  const [focusedVisualizationId, setFocusedVisualizationId] = useState(null);\n  const [registeredVisualizations, setRegisteredVisualizations] = useState({});\n\n  const onRegisterVisualization = (id, props) => {\n    setRegisteredVisualizations({\n      ...registeredVisualizations,\n      [id]: props\n    })\n  }\n\n  const onUnregisterVisualization = id => {\n    const copyOfRegistered = { ...registeredVisualizations };\n    delete copyOfRegistered[id]\n    setRegisteredVisualizations(copyOfRegistered)\n  }\n\n  const onVisualizationUpdate = ({\n    xVariable: thatXVariable,\n    xLabelVariable: thatXLabelVariable,\n    yVariable: thatYVariable,\n\n    reverseX: thatReverseX,\n    reverseY: thatReverseY,\n\n    sizeVariable: thatSizeVariable,\n    colorVariable: thatColorVariable,\n    labelVariable: thatLabelVariable,\n\n    searchString: thatSearchString,\n    colorPalette: thatColorPalette,\n\n    graphType: thatGraphType,\n    useRelativeScale: thatUseRelativeScale,\n\n    filters: theseFilters = [],\n    filtersModeAnd: theseFiltersModeAnd\n  }) => {\n    setXVariable(thatXVariable);\n    setXLabelVariable(thatXLabelVariable);\n    setYVariable(thatYVariable);\n    setReverseX(thatReverseX);\n    setReverseY(thatReverseY);\n    setSizeVariable(thatSizeVariable);\n    setColorVariable(thatColorVariable);\n    setLabelVariable(thatLabelVariable);\n    setSearchString(thatSearchString);\n    setGraphType(thatGraphType);\n    setUseRelativeScale(thatUseRelativeScale);\n    setFilters(theseFilters);\n    setFiltersModeAnd(theseFiltersModeAnd);\n\n\n    if (thatColorPalette && colorVariable === thatColorVariable) {\n      setColorPalette(thatColorPalette);\n    } else if (thatColorVariable) {\n      let colors = thatColorVariable && thatColorVariable !== 'default' ? generatePalette(thatColorVariable, filtersOptions[thatColorVariable].options.length) : undefined\n      // const colors = generatePalette(thatColorVariable, filtersOptions[thatColorVariable].options.size);\n      const finalPalette = {};\n      let i = 0;\n      filtersOptions[thatColorVariable].options.forEach(option => {\n        finalPalette[option] = colors[i];\n        i++;\n      });\n      setColorPalette(finalPalette);\n    } else if (colorPalette) {\n      setColorPalette(undefined);\n    }\n  }\n\n  useEffect(() => {\n    if (!focusedVisualizationId && Object.keys(registeredVisualizations).length) {\n      const thatId = Object.keys(registeredVisualizations)[0];\n      setFocusedVisualizationId(thatId)\n      onVisualizationUpdate(registeredVisualizations[thatId])\n    }\n  }, [registeredVisualizations, focusedVisualizationId])/* eslint react-hooks/exhaustive-deps : 0 */\n\n\n  const onSearchStringChange = str => {\n    setSearchString(str);\n  }\n  return (\n    <VisualizationControlContext.Provider value={{\n      onVisualizationUpdate,\n      onRegisterVisualization,\n      onUnregisterVisualization,\n      focusedVisualizationId,\n      setFocusedVisualizationId,\n      visualizationParams: {\n        graphType,\n        useRelativeScale,\n\n        xVariable,\n        xLabelVariable,\n        yVariable,\n\n        reverseX,\n        reverseY,\n\n        sizeVariable,\n        colorVariable,\n\n        searchString,\n        colorPalette,\n\n        filters,\n        filtersModeAnd\n      }\n    }}>\n      <div className=\"slide-container\">\n        <section>\n          <div>\n            <p>\n              <button className={helpVisible ? 'is-active' : ''} onClick={() => setHelpVisible(!helpVisible)}>\n                Comment modifier cette page ?\n            </button>\n            </p>\n            <ol className={`edit-help ${helpVisible ? 'is-active' : ''}`}>\n              <li>\n                Préalablement se logger dans github si le répertoire est privé\n            </li>\n              <li>\n                Se rendre sur <a target=\"blank\" href={contentsURL}>cette page du répertoire github</a>\n              </li>\n              <li>\n                Cliquer sur le crayon en haut à droite des contenus (il affiche \"edit\" au survol)\n            </li>\n              <li>\n                Faire les modifications puis cliquer sur \"Commit changes\" en bas de la page\n            </li>\n              <li>\n                Attendre 2 minutes puis recharger la page pour voir la version à jour de la page\n            </li>\n            </ol>\n          </div>\n          <Suspense fallback={<div>Chargement</div>}>\n            <Content />\n          </Suspense>\n          <FooterNav prevPage={prevPage} nextPage={nextPage} />\n        </section>\n        <aside>\n          <div className=\"vis\">\n            <LinearGraphVis\n              {\n              ...{\n                data,\n                filtersOptions,\n\n                xVariable,\n                xLabelVariable,\n                reverseX,\n                yVariable,\n                reverseY,\n                sizeVariable,\n                colorVariable,\n                labelVariable,\n                colorPalette,\n                searchString,\n                useRelativeScale,\n                graphType,\n\n                onSearchStringChange,\n\n                filtersModeAnd,\n                filters,\n\n                onToggleFiltersModeAnd: () => setFiltersModeAnd(!filtersModeAnd),\n                onFiltersChange: (newFilters) => setFilters(newFilters),\n\n                onXVariableChange: (val) => setXVariable(val),\n                onXLabelVariableChange: (val) => setXLabelVariable(val),\n                onYVariableChange: (val) => setYVariable(val),\n\n                onToggleReverseX: () => setReverseX(!reverseX),\n                onToggleReverseY: () => setReverseY(!reverseY),\n\n                onColorVariableChange: (val) => setColorVariable(val),\n                onColorPaletteChange: val => setColorPalette(val),\n\n                onGraphTypeChange: val => setGraphType(val),\n                onToggleUseRelativeScale: () => setUseRelativeScale(!useRelativeScale)\n              }\n              }\n            />\n          </div>\n        </aside>\n      </div>\n    </VisualizationControlContext.Provider>\n  )\n}\n\nexport default LinearGraphAnnotation;","import React, {useState, Suspense} from 'react';\nimport FooterNav from '../FooterNav';\n\nconst PlainPage = ({\n  Content,\n  contentsURL,\n  prevPage,\n  nextPage\n}) => {\n  const [helpVisible, setHelpVisible] = useState(false);\n  return (\n    <div className=\"slide-container without-visualization\">\n      <section>\n        <div>\n          <p>\n            <button className={helpVisible ? 'is-active': ''} onClick={() => setHelpVisible(!helpVisible)}>\n              Comment modifier cette page ?\n            </button>\n          </p>\n          <ol className={`edit-help ${helpVisible ? 'is-active' : ''}`}>\n            <li>\n              Préalablement se logger dans github si le répertoire est privé\n            </li>\n            <li>\n              Se rendre sur <a target=\"blank\" href={contentsURL}>cette page du répertoire github</a>\n            </li>\n            <li>\n              Cliquer sur le crayon en haut à droite des contenus (il affiche \"edit\" au survol)\n            </li>\n            <li>\n              Faire les modifications puis cliquer sur \"Commit changes\" en bas de la page\n            </li>\n            <li>\n              Attendre 2 minutes puis recharger la page pour voir la version à jour de la page\n            </li>\n          </ol>\n        </div>\n        <Suspense fallback={<div>Chargement</div>}>\n          <Content />\n        </Suspense>\n        <FooterNav prevPage={prevPage} nextPage={nextPage} />\n      </section>\n      <aside>\n      </aside>\n  </div>\n  )\n}\n\nexport default PlainPage;","import GraphAnnotation from './components/GraphAnnotation';\nimport IceCreamAnnotation from './components/IceCreamAnnotation';\nimport LinearGraphAnnotation from './components/LinearGraphAnnotation';\nimport PlainPage from './components/PlainPage';\n\nconst routes = [\n  {\n    title: 'Introduction',\n    route: '/introduction',\n    contents: '00_home.mdx',\n    Component: PlainPage\n  },\n  {\n    title: '1. Couverture médias',\n    route: '/01-couverture-media',\n    contents: '01_couverture_media.mdx',\n    Component: PlainPage\n  },\n  {\n    title: '2. Détecter les critiques',\n    route: '/02-detect-critic',\n    contents: '02_detectcritic.mdx',\n    Component: PlainPage\n  },\n  {\n    title: '3. Graphe clusters',\n    route: '/03-graph-clusters',\n    contents: '03_graphclusters.mdx',\n    data: 'Graph_Critic_EN_algopress_webV2.gexf',\n    Component: GraphAnnotation\n  },\n  {\n    title: '4. Évolution de l\\'agenda médiatique',\n    route: '/04-timeline-clusters',\n    contents: '04_timelineclusters.mdx',\n    Component: PlainPage\n  },\n  {\n    title: '5. Topologie du réseau',\n    route: '/05-topologie',\n    contents: '05_toporobotalgo.mdx',\n    data: 'Graph_Critic_EN_algopress_webV2.gexf',\n    Component: GraphAnnotation\n  },\n  {\n    title: '6. Agents calculateurs',\n    route: '/06-agents',\n    contents: '06_explore_entities.mdx',\n    data: 'Graph_Critic_EN_algopress_webV2.gexf',\n    Component: GraphAnnotation\n  },\n  {\n    title: '7. Verbes de troubles',\n    route: '/07-verbs',\n    contents: '07_IssueVERB.mdx',\n    data: 'df_AB_tfidf_verbs_freq_count.csv',\n    Component: IceCreamAnnotation\n  },\n  {\n    title: '8. Temporalité',\n    route: '/08-temporalite',\n    contents: '08_NERdate.mdx',\n    Component: LinearGraphAnnotation,\n    data: '4average_clusters_unpivoted.csv'\n  },\n  // {\n  //   title: 'Graphe des critiques anglophones',\n  //   route: '/graph-critic-en',\n  //   contents: 'graph-critics.mdx',\n  //   data: 'Graph_Critic_EN_algopress_webV2.gexf',\n  //   Component: GraphAnnotation\n  // },\n  // {\n  //   title: 'Analyse des dates (fichier \"date_ner_tfidf_v3\")',\n  //   route: '/dates-analysis',\n  //   contents: 'dates-analysis.mdx',\n  //   data: 'date_ner_tfidf_v3.tsv',\n  //   Component: IceCreamAnnotation\n  // },\n  // {\n  //   title: 'Analyse des verbes (fichier \"df_AB_tfidf_verbs_freq_count.csv\")',\n  //   route: '/verbs-analysis',\n  //   contents: 'verbs-analysis.mdx',\n  //   data: 'df_AB_tfidf_verbs_freq_count.csv',\n  //   Component: IceCreamAnnotation\n  // }\n]\n\nexport default routes;","import PlainPage from './PlainPage';\n\nexport default PlainPage;","import React from \"react\";\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  NavLink as Link,\n  Redirect,\n} from \"react-router-dom\";\n\nimport './App.css';\n\nimport {repository} from '../package.json';\n\nimport DataLoader from './components/DataLoader';\n\nimport routes from './summary'\n\n\nexport default function App() {\n  const renderRoute = ({\n    data, \n    contentsURL, \n    Content, \n    ThatComponent,\n    prevPage,\n    nextPage\n  }) => (\n      <DataLoader url={data ? `${process.env.PUBLIC_URL}/data/${data}` : undefined}>\n        {\n          data => (\n            <ThatComponent\n              {\n                ...{\n                  contentsURL,\n                  Content,\n                  prevPage,\n                  nextPage,\n                  data\n                }\n              }\n            />\n          )\n        }\n      </DataLoader>\n  )\n  return (\n    <Router>\n      <div id=\"wrapper\">\n        <nav>\n          <ul>\n            {\n              routes.map(({title, route}, index) => (\n                <li key={index} className=\"navitem-container\">\n                  <Link to={route}>\n                    {title}\n                  </Link>\n                </li>\n              ))\n            }\n          </ul>\n        </nav>\n        <main>\n          <Switch>\n            {\n              routes.map(({\n                // title,\n                route, \n                contents,\n                data,\n                Component: ThatComponent\n              }, index) => {\n                const prevPage = index > 0 ? routes[index - 1] : undefined;\n                const nextPage = index < routes.length - 1 ? routes[index + 1] : undefined;\n                const Content = React.lazy(() => import(`!babel-loader!mdx-loader!./contents/${contents}`))\n                const contentsURL = `${repository}/blob/main/src/contents/${contents}`;\n                return (\n                  <Route key={index} path={route}>\n                    {renderRoute({data, contentsURL, Content, ThatComponent, prevPage, nextPage})}\n                  </Route>\n                )\n              } )\n              \n            }\n            <Redirect to={routes[0].route} />\n          </Switch>\n        </main>\n      </div>\n    </Router>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}